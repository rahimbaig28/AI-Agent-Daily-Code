Pocket Sprint â€” single-file HTML productivity sprint app

- Purpose: Lightweight offline-first single-file web app to run focused "sprints" (short timed work sessions) with per-sprint notes, simple kanban-style quick backlog, and session history stored in localStorage; auto dark/light theme, full keyboard accessibility and ARIA labels for screen readers.

- File type: Single HTML file with inline CSS and JS only (no external libs or resources). All data persisted to localStorage as JSON under key "pocketSprint:v1".

- Core features (implementable in one file, under ~1000 lines):
  - Create a new Sprint:
    - Inputs: Title (required), Duration minutes (default 25), Optional tags (comma-separated), Optional goal/note.
    - Start/Pause/Stop controls. Starting begins countdown; pausing resumes later; stopping ends session and saves history entry.
    - Accessible keyboard shortcuts: Space = start/pause, S = stop/save, N = new sprint focus, ArrowUp/Down = increase/decrease minutes (when focused on duration).
    - Provide ARIA attributes: role="timer", aria-live updates for remaining time, labelled controls.
  - Live countdown UI:
    - Large remaining time display (MM:SS) with animated circular progress ring (SVG) or CSS-based progress.
    - Color-coded state: running (accent), paused (muted), finished (success/flash).
    - Audible beep (short tone via Web Audio API) and visual flash when finished; allow mute toggle persisted in settings.
  - Quick backlog (mini-kanban):
    - Single-column backlog with add/edit/delete inline items; drag-to-reorder via keyboard controls (Move Up/Down buttons) and pointer drag support if feasible.
    - Each backlog item: short title, optional estimate (minutes), done toggle. Items can be attached to a sprint when starting (dropdown of backlog items).
    - Persist backlog in same localStorage JSON.
  - Session history and analytics:
    - After each stop, save record: id, title, tags, start/end timestamps, duration, completed flag, notes, attached backlog item ids.
    - History list with filters (date range: today/7d/30d/all; tag filter; success/completed filter) and simple stats: total sprints, minutes worked, average sprint length for selected range.
    - Export/Import: JSON download and upload to restore or transfer data.
  - Notes editor per sprint:
    - Plain-text notes area with autosave per keystroke (debounced) into the active sprint record.
    - Support for lightweight markdown preview toggle (basic bold/italic/links rendering) implemented client-side.
  - Settings & UI:
    - Auto theme: follows system dark/light via prefers-color-scheme; also allow manual override (Light / Dark / Auto) persisted to localStorage.
    - Font size control (small/normal/large) for accessibility.
    - Mute/on for sounds, enable/disable animation for reduced-motion users.
    - Clear data button with confirmation and data export option.
  - Offline-first behavior:
    - App works entirely offline after initial load; all persistence via localStorage; warn user if storage quota issue on save.
    - On first load, seed example backlog items and a short welcome sprint.
  - Accessibility:
    - Semantic HTML structure (header, main, aside, footer).
    - All interactive controls keyboard focusable and reachable; logical tab order.
    - ARIA roles: role="application" for main app container, role="list"/"listitem" for backlog/history, aria-live for dynamic messages, aria-labels on buttons and inputs.
    - High-contrast color tokens and respect prefers-reduced-motion.
  - Keyboard-first workflows:
    - Global command palette toggle (Ctrl+K or /) that focuses a quick-create sprint form or runs commands: "new", "start", "stop", "mute", "export".
    - Toast notifications for actions (saved, exported, errors) accessible via aria-live region.
  - Minimal animations & visual design:
    - Clean responsive layout: left column main sprint, right column collapsible backlog/history on wide screens; single-column stacked on mobile.
    - CSS variables for theme colors; system-font stack; scalable SVG icons inline.
  - Tests & developer notes:
    - Include simple self-test button in settings to simulate a 5-second sprint finish (for verifying sound/notifications).
    - Console debug mode toggle to log localStorage operations.

- Data model (concise, required for implementers):
  - Storage root: { sprints: {id: SprintRecord}, backlog: [BacklogItem], settings: {...}, history: [HistoryRecord] }
  - SprintRecord: { id, title, durationMin, tags:[], notes, attachedBacklogIds:[], createdAt, updatedAt, runningState: "idle"|"running"|"paused"|"finished", remainingSec }
  - BacklogItem: { id, title, estimateMin, done:false, order }
  - HistoryRecord: { id, sprintId, startAt, endAt, durationSec, completed:boolean }
  - Settings: {theme:"auto"|"dark"|"light", soundOn:true, motionOK:true, fontSize:"normal"}

- Implementation constraints and behaviors:
  - Single HTML file: include an inline <style> and <script>. No external fonts, images, or network calls.
  - Use requestAnimationFrame or setInterval for precise countdown; persist remaining seconds every 1s and on visibilitychange to survive tab switches or reloads.
  - Use page visibility API to adjust timer accuracy and save drift corrections.
  - Ensure storage writes are debounced (e.g., 300ms) to avoid excessive sync.
  - All user-triggered destructive actions require confirmation dialogs (clear data, delete backlog item).
  - Export produces a downloadable JSON file named pocket-sprint-export-<timestamp>.json; Import accepts a valid JSON file and merges or replaces data (prompt user).
  - UI must remain usable with JS disabled for basic viewing: show static help and last-saved sprint title/summary from localStorage snapshot (graceful degradation). If JS disabled, show a fallback message prompting to enable JS for interactive features.

- Deliverable acceptance criteria:
  - Opening the single HTML file in browser fully functional offline.
  - Can create/start/pause/stop a sprint; finishing plays sound (if enabled) and stores a history item.
  - Backlog items can be added/edited/deleted and attached to sprints.
  - Settings persist and theme follows system when set to Auto.
  - Data export/import works and localStorage keys are used as specified.
  - App is navigable and operable via keyboard and screen reader labels are present.

- Extra optional enhancements (implement only if space/time):
  - Tiny local notification permission prompt to show browser notifications on finish (fallback to visual+audio if denied).
  - Short pomodoro mode preset with auto-breaks toggle (auto-start break timer).
  - Basic tagging autocomplete when adding tags based on existing tags in storage.

(Generated: 2025-12-24T08:27:43.352316Z, seed=46020, theme=personal productivity, extras=dark/light auto theme, ARIA-compliant components, offline-first with localStorage, kind=html)
