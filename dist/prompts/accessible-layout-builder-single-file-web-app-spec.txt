Accessible Layout Builder — single-file web app spec

- Purpose: A small, single-file HTML app that lets users create, edit, and export simple accessible page layouts (responsive grid + ARIA helpers) by dragging components onto a canvas; aimed at designers/developers who want quick accessible prototypes and semantic snippets.

- File type: Single HTML file with inline CSS and vanilla JS only. No external assets or libraries. All state persisted to localStorage.

- Core features (implementable <1000 LOC):
  - Left toolbox with selectable components: Heading (h1–h3), Paragraph, Button, Image placeholder (with alt text), Form field (label + input), Card (region with title/body), and Spacer.
  - Central canvas rendered as a responsive grid preview (CSS grid) with three breakpoints: mobile (1 col), tablet (2 cols), desktop (4 cols). Canvas shows semantic tags and ARIA attributes visually.
  - Drag-and-drop: drag components from toolbox into canvas and reorder by drag within canvas. Keyboard accessible move: selected item can be moved up/down/left/right with Ctrl+Arrow keys for repositioning in grid.
  - Component inspector (right panel) when an item is selected: editable properties appropriate to type (text content, heading level, button role/type, image src and required alt, form input type and required flag, ARIA role, aria-label, tabindex). Changes update canvas live.
  - Accessibility helpers:
    - Required-alt checker that flags image components missing alt (visual red outline + inspector warning).
    - Contrast preview: when editing text color/background color in inspector, show WCAG AA pass/fail badge (use simple luminance check).
    - ARIA live region toggles: allow marking components with aria-live="polite|assertive|off" and demonstrate announcements in a test area.
    - Skip-link generator: toggle on/off a top skip-to-content link and show how it targets canvas main region.
  - Semantic export: Export button provides two outputs in a modal/tab:
    - Copyable HTML snippet of the current canvas (semantic tags, ARIA attributes, inline minimal CSS for layout).
    - Accessible checklist (JSON) summarizing issues (missing alt, low contrast, missing form labels, tabindex conflicts). Both persisted with localStorage history.
  - History & persistence:
    - Auto-save to localStorage on change (debounced).
    - Manage saved layouts list (save/load/delete). Keep up to 10 versions.
  - Responsive preview toggle: switch between device widths; keyboard accessible buttons. Canvas updates layout accordingly.
  - Keyboard+screen-reader friendly UI:
    - All controls reachable via Tab; visible focus outlines.
    - Toolbox items are buttons with aria-grabbed state while dragging.
    - Announcements: use a hidden ARIA live region to announce drag/drop, save/load, and accessibility warnings.
    - Roles: main, navigation, complementary, region, form with appropriate aria-labels.
  - Minimal visual design: high-contrast, scalable type, prefers-reduced-motion support.

- Interaction details and constraints:
  - Drag-and-drop:
    - Mouse: standard HTML5 Drag and Drop for toolbox→canvas and reordering in canvas.
    - Keyboard: toolbox items can be focused and "picked up" with Space/Enter (sets aria-grabbed=true), then moved to target grid cell with arrow keys and placed with Space/Enter.
  - Grid placement logic:
    - Canvas exposes a clear grid with numbered cells; dropping places the component into the nearest cell.
    - Items can span 1–2 columns via inspector toggle.
  - Focus management:
    - After adding a component, focus moves to its inspector and a polite announcement is made.
    - When exporting, the modal traps focus and is dismissible with Escape.
  - Validation rules:
    - Image components: require non-empty alt; flag otherwise.
    - Form inputs: must have associated label (inspector creates link).
    - Tabindex audit: inspector warns if tabindex > 0 detected; suggest using logical DOM order.
  - Export format:
    - HTML export uses semantic tags (e.g., <header>, <main>, <section>, <article>, <button>), includes aria attributes and a comment header with generated accessibility checklist items.
    - Checklist JSON includes keys: id, issueType, severity (info/warning/error), message, suggestedFix.
  - Accessibility testing helpers:
    - Contrast checker uses foreground & background hex inputs and computes contrast ratio; indicates pass/fail for AA body text (>=4.5:1).
    - Live-region demo button appends a test message to an aria-live region to show how different aria-live settings announce content.

- UI layout and keyboard shortcuts:
  - Three-column responsive app layout: nav/toolbox (left), canvas (center), inspector/history (right). Collapsible panels on narrow screens.
  - Keyboard shortcuts (shown in Help):
    - N: new layout
    - S: save layout
    - E: export
    - / or ? : open help overlay with shortcuts
    - Ctrl+Arrow: move selected element in grid
    - Delete: remove selected element
  - All shortcuts announced in the ARIA live region when used.

- Testing notes for implementer:
  - Ensure semantic DOM order reflects visual order for keyboard navigation; if grid reorders visually, update DOM or manage tabindex to preserve reading order.
  - Use role="application" only if necessary; prefer standard roles and ARIA landmarks.
  - Implement minimal CSS for printable/exportable layout; keep overall script under ~800 lines.

- Deliverables the app must produce:
  - Single HTML file that runs offline in modern browsers.
  - Demonstrable drag+keyboard placement, inspector editing, accessibility warnings, responsive preview, and export of semantic HTML + checklist JSON.
  - LocalStorage persistence for auto-save and saved versions.

(Generated: 2025-12-24T12:40:19.043896Z, seed=91988, theme=accessibility helpers, extras=responsive grid, ARIA-compliant components, drag-and-drop, kind=html)
