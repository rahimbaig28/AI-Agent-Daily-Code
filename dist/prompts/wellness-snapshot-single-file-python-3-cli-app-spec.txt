Wellness Snapshot — single-file Python 3 CLI app spec

- Purpose: A compact, single-file Python 3 command-line wellness tracker that lets a user record short daily wellbeing entries (mood, sleep hours, water cups, brief note), view and search past entries, compute simple weekly/monthly summaries, and export/import the whole dataset as JSON. The app is designed for quick daily use, privacy (local file only), and accessibility (keyboard-first CLI with clear prompts).  

- Runtime constraints: Python 3.8+ standard library only; single .py file; data persisted to a JSON file named wellness_snapshot.json in the same directory.

- Core features (implementable within ~1000 lines):
  - Initialize: on first run, create wellness_snapshot.json with an empty list and store a metadata object with version and created_at timestamp.
  - Add entry: keyboard-driven prompt flow to add one daily entry with fields:
    - date (default = today, editable, ISO YYYY-MM-DD)
    - mood (choices 1–5 integer with short labels; accept number or label)
    - sleep_hours (float, 0–24)
    - water_cups (int, 0–50)
    - energy_level (slider-like integer 1–5)
    - short note (max 200 chars)
    - tags (comma-separated, optional)
    Validate inputs with clear error messages and re-prompt.
  - Quick add mode: accept a single compact string like "today 4 7.5 6 'ran 3km' tags:run,cardio" parsed into an entry.
  - List entries: paginated (configurable page size), showing date, mood label, sleep, water, and truncated note; supports keyboard navigation:
    - n/p for next/prev page
    - o <index> to open full entry details
    - d <index> to delete (with confirm)
  - Search/filter: filter by date range, mood range, tag, or free-text in notes; show filtered list; combine filters with simple commands (e.g., "mood>=4 tag:run 2025-12-01..2025-12-28").
  - Summary reports:
    - Last 7 days and last 30 days averages: average sleep_hours, average water_cups, mood distribution counts, average energy_level.
    - Trend sparkline-like ASCII for last 14 days of mood (• or · symbols to indicate magnitude).
  - Export/Import:
    - Export writes selected entries (date-range or all) to JSON file chosen by user.
    - Import merges JSON file into local store, avoiding duplicates by date and identical content; report how many added/merged.
  - Backup & restore: auto-rotate a timestamped backup file each time data is modified (keep last 5 backups).
  - Configurable settings saved in the same JSON store under a "config" key:
    - page_size, time zone hint, autosave (on/off), weekday start for weekly reports.
  - Lightweight analytics: compute a "wellness score" per entry: normalized weighted sum (mood*0.5 + energy*0.3 + normalized sleep*0.2) and report average wellness score over a period.
  - Share via URL hash (text-only): generate a single-line share token encoded in base64 (JSON of selected entry or summary), printable to clipboard if platform supports (attempts to copy using pyperclip is NOT allowed — instead print and attempt to write to clipboard on macOS via pbcopy and Linux via xclip if available; if command not available, show the share string). This keeps app standard-library only and optionally uses subprocess for system clipboard if present.
  - Accessibility / Keyboard support:
    - All actions invocable via short commands shown in a persistent help menu (h or ?).
    - Numbered lists and index-based commands; clear confirmation prompts and cancels (y/n).
    - Support for arrow keys where readable (use getch-like fallback from standard library: detect and parse simple ANSI sequences via sys.stdin.read when in raw mode).
  - Help and onboarding: first-run quick guided tour showing how to add an entry, list, and view summary; accessible anytime via "help".
  - Robust error handling: validate JSON load, detect corrupted data and offer restore from latest backup.

- UX / CLI commands (examples — implement as a simple REPL):
  - add        — interactive add
  - quick <str>— parse compact add
  - list [page]— list entries
  - open <index> — show full entry
  - delete <index> — delete entry (confirm)
  - search <query> — filter entries
  - summary [7|30|custom-range] — show summary report
  - export <filename> [date-range] — export JSON
  - import <filename> — import JSON and merge
  - backup restore — list backups and restore by index
  - share <index|summary> — print/share token
  - config — view/change settings
  - help / quit / exit

- Data model (JSON):
  - top-level object with keys:
    - metadata: {version, created_at, last_modified}
    - config: {page_size, autosave, weekday_start}
    - entries: [ {date, mood:int, mood_label, sleep_hours:float, water_cups:int, energy:int, note, tags:[str], wellness_score:float, created_at, updated_at} ]
    - backups: optional list of backup filenames (managed by app)

- Validation & constraints:
  - Date parsing must accept YYYY-MM-DD and shortcuts "today" and "yesterday".
  - Mood labels default: 1:Terrible, 2:Bad, 3:Okay, 4:Good, 5:Great.
  - Enforce note length and numeric ranges; on invalid input, show the valid range and re-prompt.
  - When computing averages, ignore entries missing the measured field.

- Implementation notes & limits (for developer building the file):
  - Use only standard library modules: json, datetime, pathlib, statistics, base64, argparse (optional), shutil, tempfile, sys, os, subprocess, tty, termios (for Unix raw input), and typing.
  - Keep UI text simple with consistent prompts; color is optional — if implemented, use ANSI codes guarded by a config flag.
  - File I/O: use atomic write (write to temp file then rename) to avoid corruption.
  - Backups: store in ./backups/ with timestamped filenames; keep only last 5 by default.
  - Single-file size goal: small and readable; target < 1000 lines.

- Testable acceptance criteria:
  - Running python wellness_snapshot.py creates the JSON store if missing and shows the help/REPL.
  - User can add an entry interactively and see it in list output immediately.
  - Summary command returns numeric averages for last 7 days after at least one entry per day in that range.
  - Export writes a JSON file containing the selected entries.
  - Import merges without creating duplicate entries for the same date and identical content.
  - Backup rotation retains only the last 5 backups.
  - Share command prints a base64 token that decodes to the original JSON payload.

- Security & privacy:
  - All data stored locally only unless the user explicitly copies the share token or exports files.
  - Do not transmit data externally by default; avoid network calls.

- Optional enhancements (implement only if space/time allows):
  - Auto-theme terminal colors for dark/light terminals (detect TERM or background via heuristics).
  - Weekly goal check: allow user to set simple goals (sleep avg >= 7, water >= 8 cups/day) and show pass/fail in summary.
  - Simple CSV export option.

End of spec.

(Generated: 2025-12-28T04:42:43.719158Z, seed=38756, theme=health & wellness, extras=ARIA-compliant components, dark/light auto theme, share via URL hash, kind=py)
