Daily Micro-Habits Coach (CLI)

- Purpose  
  - Single-file Python 3 command-line app that helps users build and track small daily health & wellness habits (movement, hydration, sleep, mindfulness).  
  - Focus on quick check-ins, streaks, and simple reflection instead of complex analytics.

- Tech & structure  
  - Single Python 3 script, standard library only (e.g., json, datetime, textwrap, pathlib, itertools, argparse, shutil, curses or simple input-based UI).  
  - Data persistence via a single JSON file in the user’s home directory (e.g., ~/.micro_habits.json on Unix-like, micro_habits.json in user folder on Windows).  
  - Clear separation in code: data layer (read/write JSON), logic layer (habit calculations), UI layer (CLI rendering and input).

- Core data model  
  - User profile:  
    - display_name (string)  
    - preferred_theme: "light" | "dark" | "auto"  
    - daily_checkin_time (HH:MM string, local time, optional)  
  - Habit definition:  
    - id (string, stable internal key)  
    - name (string, e.g., “Drink water”)  
    - category: "movement" | "nutrition" | "sleep" | "mindfulness" | "other"  
    - target_type: "boolean" (did/didn’t) | "count" | "duration_minutes"  
    - target_value (number or null for boolean)  
    - is_active (bool)  
  - Daily entry (per date YYYY-MM-DD):  
    - date  
    - habit_results: list of {habit_id, value (number or bool), note (optional string)}  
    - energy_level (1–5, optional)  
    - mood (1–5, optional)  
    - reflection (short string, optional)  
  - App state:  
    - streaks per habit (computed on load, not stored)  
    - last_opened date (to support first-run-of-day behavior).

- Themes (light/dark/auto)  
  - Support two color schemes via ANSI escape codes:  
    - Light: light background assumption, darker text for headings and subtle colored accents.  
    - Dark: dark background assumption, lighter text and accent colors.  
  - "auto" theme:  
    - Based on local time (from datetime):  
      - Dark mode between 19:00–07:00, light mode otherwise.  
  - Provide a `--theme` CLI override flag for one-off runs ("light" or "dark") without modifying saved preference.  
  - Provide a `settings` screen where user can toggle default theme, including "auto".  
  - Provide a `--no-color` flag to disable all ANSI codes for accessibility and log compatibility.

- CLI navigation (text UI)  
  - Run without arguments: show main menu with numbered options:  
    1) Today’s check-in  
    2) View dashboard  
    3) Edit habits  
    4) Weekly summary  
    5) Settings  
    6) Export / Print view  
    0) Quit  
  - Accept numeric choice or first letter shortcut (e.g., T, D, E, W, S, X, Q).  
  - Provide global commands visible at bottom:  
    - `q` to go back/quit from sub-screens  
    - `h` to show keyboard help  
    - `?` to show short description of current screen.  
  - Support arrow keys and Enter for selection when the terminal supports it; fall back to simple “enter number” prompts if curses is not available or fails.

- Today’s check-in (core workflow)  
  - On choosing “Today’s check-in”:  
    - Auto-detect today’s date and load existing entry or create a new one.  
    - Show a vertical list of active habits in a simple “responsive grid” style:  
      - Multi-column layout when terminal width is wide enough: label columns with habit name, target, status (✓ / ✗ / partial).  
      - Single-column layout on narrow terminals (detected using shutil.get_terminal_size).  
    - For each active habit, prompt user to enter:  
      - For boolean targets: Y/N with default to previous value if exists.  
      - For count/duration: numeric input with default to last entered value for that habit (if any).  
    - Allow quick keyboard shortcuts:  
      - `Enter` to accept suggested default  
      - `.` to mark as “same as yesterday” when applicable.  
    - After habits, ask optional wellness prompts:  
      - “Energy level (1–5, Enter to skip): ”  
      - “Mood (1–5, Enter to skip): ”  
      - “One sentence reflection about today (optional): ”  
    - Save automatically after completing the flow and show a brief summary including updated streaks.  

- Dashboard view  
  - Show a concise overview for the last 7 days (rolling, inclusive of today):  
    - Table-like text with dates as rows and each active habit as a column (truncate names, show icons/letters).  
    - Use characters like `.` for not done, `✓` for on-target, `~` for partial (for numeric habits where value < target).  
  - Below the table, show per-habit stats:  
    - Current streak (consecutive days meeting target).  
    - Best streak.  
    - Completion rate over last 7 and last 30 days (percentage).  
  - Option to press a habit’s number or first letter to see a mini-detail screen for that habit (values per day for last 14 days).

- Edit habits  
  - List existing habits with index numbers and status (active/inactive).  
  - Options:  
    - Add new habit  
    - Edit habit (rename, change category, target type/value)  
    - Deactivate/activate habit  
    - Delete habit (with confirmation prompt).  
  - When adding a habit: guided wizard prompts:  
    - Name  
    - Category (numbered list)  
    - Target type  
    - Target value when applicable.  
  - When changing target type or deactivating habits, keep historical daily data unchanged.

- Weekly summary  
  - For the last full 7-day span ending today (or last recorded day if no data today):  
    - Overall adherence score (average completion percentage across active habits).  
    - Top 2 habits by consistency.  
    - 1–2 simple text “insights”, for example:  
      - If mood/energy logged: “On days when you met at least 70% of your targets, your average mood was X vs Y on other days.”  
      - If clear trend: “You completed ‘Evening stretch’ 4 days in a row—nice streak.”  
    - Highlight one simple suggestion, e.g., “Consider lowering target for ‘Steps’ if completion < 30%.” (heuristic rules).  
  - Enable navigation via `n`/`p` keys or numbered prompts to move to earlier/later weeks.

- Settings  
  - Manage:  
    - Display name  
    - Preferred theme (light/dark/auto)  
    - Default daily reminder time (HH:MM or disabled)  
    - Default timeframe for dashboard (7, 14, 30 days).  
  - Offer option to reset all data (requires typing “DELETE ALL” to confirm).  
  - Option to show internal data file path for advanced users.

- Reminder / gentle nudges  
  - On startup, if current time is more than 1 hour after daily_checkin_time and today has no entry, display a prominent, dismissible reminder:  
    - “You haven’t checked in today. Start a quick check-in now? [Y/n]”.  
  - If user declines, continue to main menu without nag until next run.

- Export / Print-friendly view  
  - Provide an “Export / Print view” option that:  
    - Generates a structured, plain-text summary for a user-selected date range (default last 30 days).  
    - Layout optimized for printing: minimal color, clear headers, simple ASCII tables, wrapped lines at ~80 characters.  
  - Prompt user for export mode:  
    - “Show on screen”  
    - “Save to file” (text file in same directory or specified path).  
  - Include in export:  
    - Per-day checklist of habits and values.  
    - Weekly summaries.  
    - Average mood/energy if available.  

- Accessibility & usability  
  - All features usable via keyboard; no mouse dependence.  
  - Provide `--help` CLI flag describing commands and options.  
  - Support `--today` flag to jump directly into today’s check-in, skipping main menu.  
  - Handle invalid input robustly with clear error messages and re-prompting.  
  - Respect terminal width; truncate overly long text and wrap descriptions, avoiding horizontal scrolling.  
  - Offer an optional “high contrast” mode in settings that uses only bold and underlines instead of color.  

- Testing considerations / sample flows  
  - First run:  
    - Ask for display_name and basic settings, then auto-create example habits:  
      - “Drink water (5 glasses)” – count target  
      - “Walk 20 minutes” – duration target  
      - “Evening unwind (no screens 30 min before bed)” – boolean target.  
  - Verify:  
    - That data persists across runs and days.  
    - That streaks update correctly when skipping days.  
    - That auto theme switches based on time when set to “auto”.  
    - That export output is stable and easy to inspect/print.

(Generated: 2026-01-08T04:38:26.015552Z, seed=69567, theme=health & wellness, extras=dark/light auto theme, responsive grid, print-friendly view, kind=py)
