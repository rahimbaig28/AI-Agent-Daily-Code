EcoHabits Dashboard

- Purpose
  - Single-page web app to track and visualize personal daily habits that improve environmental sustainability (e.g., biking instead of driving, reducing meat meals, saving electricity).
  - Focus on quick entry, clear impact feedback (e.g., CO₂-equivalent estimates), and easy backup/restore via JSON export/import.

- Technology & Structure
  - One self-contained HTML file.
  - Inline CSS in a <style> block, inline JavaScript in a <script> block, no external assets or libraries.
  - Mobile-first responsive layout; enhance for wider screens with a CSS grid-based dashboard.

- Data Model
  - Habit definition:
    - id (string)
    - name (string)
    - category (string, e.g., "Transport", "Food", "Energy", "Waste", "Water")
    - unitLabel (string, e.g., "km biked", "meat-free meals", "kWh saved")
    - defaultAmount (number, optional)
    - co2PerUnit (number, kg CO₂e per unit)
    - color (string, CSS color for visual tags)
    - isActive (boolean)
  - Habit log entry:
    - id (string)
    - habitId (string)
    - date (ISO yyyy-mm-dd)
    - amount (number)
  - App state:
    - habits: array of habit objects
    - logs: array of log entry objects
    - uiSettings:
      - selectedDate (yyyy-mm-dd)
      - selectedRange ("today" | "week" | "month")
      - theme ("light" | "dark" | "auto")
  - Persistence:
    - Use localStorage with a single key, storing JSON-serialized state.
    - On first load, initialize with 3–4 example habits.

- Layout & UI (Mobile-first)
  - Header bar
    - App name: "EcoHabits Dashboard".
    - Compact theme toggle button (iconic text like "☀/☾") with accessible label.
  - Main responsive layout
    - On narrow screens: vertical stacked sections in this order:
      1) Day Log
      2) Impact Summary
      3) Habit Manager
      4) Data Tools
    - On wide screens: CSS grid:
      - Left column: Day Log + Habit Manager stacked.
      - Right column: Impact Summary on top, Data Tools below.
  - Section: Day Log
    - Date selector:
      - Input type="date".
      - "Today" button to jump back to current date.
      - Left/right arrow buttons to move one day backward/forward.
    - Quick log grid:
      - For each active habit, show a card in a responsive grid:
        - Habit name, category tag with habit color.
        - Small numeric input for amount (step configurable, default step 1).
        - Unit label.
        - "Add" button to append a log entry for the selected date.
      - Cards wrap into multiple columns on wider screens using CSS grid.
    - Daily log list:
      - Grouped by habit for the selected date.
      - Each entry shows habit name, amount + unit, and computed CO₂e (amount * co2PerUnit, rounded).
      - Each entry includes:
        - Edit button (inline editing of amount).
        - Delete button (removes the entry).
  - Section: Impact Summary
    - Time range controls:
      - Segmented control or buttons for "Today", "This Week", "This Month".
    - KPI strip:
      - Total actions logged (count of entries).
      - Total amount per range: show aggregated amount for all habits (as generic count) and separately total CO₂e avoided (kg).
    - Category breakdown:
      - List or simple bar-like visuals per category:
        - Category name and colored bar representing relative CO₂e contribution.
        - Numeric CO₂e per category.
    - Habit leaderboard:
      - Top 3 habits by total CO₂e over the selected range.
      - Show habit name, category, total amount + unit, total CO₂e.
  - Section: Habit Manager
    - Habit list:
      - Table-like list of existing habits.
      - Columns: name, category, unit, kg CO₂e per unit, status (Active/Hidden).
      - Each row has:
        - Edit button (opens inline form or expands fields within the row).
        - Toggle active button.
        - Delete button (with confirmation prompt if habit has logs).
    - Add / edit habit form:
      - Inputs:
        - Name (required text).
        - Category (select with default options, plus "Other").
        - Unit label (text).
        - CO₂e per unit (number; required).
        - Default amount (optional number).
        - Color (input type="color").
      - "Save habit" button creates or updates habit.
      - Validation:
        - Required fields must be filled; CO₂e per unit non-negative.
        - Show inline error messages; focus moves to first invalid field.
  - Section: Data Tools
    - Export JSON:
      - "Export Data" button generates a JSON string for entire state (habits, logs, uiSettings).
      - Show JSON in a read-only <textarea> that auto-selects on focus and is scrollable.
    - Import JSON:
      - Editable <textarea> for pasting JSON.
      - "Import Data" button:
        - Attempts to parse JSON.
        - On success:
          - Validate shape (must have habits and logs arrays).
          - Replace current state after user confirmation.
          - Persist to localStorage and refresh UI.
        - On failure: show clear error message and keep existing data.
      - "Download Export" button:
        - Creates a Blob from the JSON and triggers a file download (e.g., ecohabits-backup.json).
    - File import (drag-and-drop + file input):
      - Visible drop zone with clear instructions: "Drag & drop a JSON backup here or choose a file."
      - Standard file input for manual selection.
      - On drop or file selection:
        - Read file as text via FileReader.
        - Parse and validate JSON as above.
        - Confirm before replacing data.
      - Handle invalid files with error messaging.

- Drag-and-Drop Interaction (Extra)
  - Habit card reordering:
    - In the Day Log quick log grid, allow drag-and-drop to reorder habit cards.
    - Use HTML5 drag-and-drop:
      - Each card draggable.
      - Drop indicators when hovering over another card.
      - On drop, update an order index stored in habits or uiSettings for persistent ordering.
    - Update localStorage so order persists across sessions.

- Theming & Styling
  - Two main themes: light and dark.
    - Use CSS variables for colors (background, surface, accent, text).
    - Theme toggle cycles light → dark → auto, where:
      - auto uses prefers-color-scheme if available.
  - Clean, minimal visual style:
    - Rounded cards.
    - Subtle box-shadows.
    - Clear typographic hierarchy: headings, labels, body text.
  - Responsive rules:
    - Base: single-column stack with 100% width for main sections.
    - At a medium breakpoint (e.g., 768px): two-column grid for the main layout.
    - At a wider breakpoint (e.g., 1024px): increase grid gaps and card max-widths.
  - Provide visible focus state for all interactive elements (buttons, inputs, toggles).

- Accessibility & Keyboard Support
  - Semantic HTML:
    - Use <header>, <main>, <section>, <nav>, <button>, <form>, <label>, <table> where appropriate.
  - Every input has an associated <label>.
  - ARIA:
    - Use aria-live regions for status messages (e.g., "Habit saved", "Data imported successfully").
    - Accessible names for icon-only buttons via aria-label.
  - Keyboard:
    - All actions (add/edit/delete/filters/theme toggle/export/import) must be reachable via keyboard (Tab/Shift+Tab).
    - Drag-and-drop fallback:
      - For habit reordering, provide "Move up" / "Move down" buttons on each card that are keyboard operable.
    - Pressing Enter on forms triggers the primary submit action.
  - Color contrast meets WCAG AA for text and essential UI.

- Behavior & State Management
  - On load:
    - Attempt to load state from localStorage.
    - If missing or invalid, initialize defaults and write them to localStorage.
    - Set selectedDate to today and selectedRange to "today".
  - Any change to habits, logs, or uiSettings triggers immediate save to localStorage.
  - When switching range:
    - Recompute aggregates (totals and leaderboard) in JS without reloading the page.
  - Editing or deleting a habit with existing logs:
    - If deleting: warn that associated logs will be deleted; require confirmation.
    - If deactivating: keep logs, but hide habit from quick log cards (still counted in summaries).

- Testing Hooks & Demo Data
  - Initial demo habits:
    - "Bike commute" (Transport, "km biked", co2PerUnit: e.g., 0.21).
    - "Meat-free meal" (Food, "meals", co2PerUnit: e.g., 2.5).
    - "Air-dried laundry" (Energy, "loads", co2PerUnit: e.g., 1.2).
  - On first load, auto-create a few sample log entries for the last few days so users can see summaries immediately.
  - Simple "Reset App" button in Data Tools:
    - Clears localStorage after confirmation and reloads page with default data.

(Generated: 2026-01-10T08:24:29.208601Z, seed=54227, theme=environment & sustainability, extras=responsive grid, export/import JSON, drag-and-drop, kind=html)
