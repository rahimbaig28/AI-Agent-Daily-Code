Eco Dropbox — Single-file Sustainable Item Swap (HTML)

- Purpose: A single-file web app (one HTML file with inline CSS and JS) that helps neighbors list, browse, and instantly share small reusable items (tools, books, seedlings) to encourage local reuse and reduce waste. The app is lightweight, offline-friendly, and portable as one file.

- Main UI: responsive single-page layout with header, search/filter toolbar, a grid/list of item cards, an item detail/edit panel, and a floating "Add" card. Use semantic HTML, accessible roles, and ARIA labels.

- Core features (implementable in one HTML file):
  - Create/Edit/Delete an item with fields: title, category (preset list + custom), short description, condition (new/good/fair), quantity, optional pickup notes, optional tags, and optional image (drag-and-drop or file input; image saved as Data URL). Persistent storage: localStorage with JSON under key "eco-dropbox-v1". Save timestamps and a UUID for each item.
  - Browse & filter: text search (title/description/tags), category filter, condition filter, tag chips, and sort by newest/closest match (basic scoring). Filters update the URL hash with a compact encoded query so the current view can be shared/bookmarked.
  - Share view via URL hash: encode current filters and optional selected item ID into the hash; on load parse hash to restore filters and open item detail if present. Keep the hash compact (base64 or URL-safe JSON).
  - Drag-and-drop add: dropping an image onto the "Add" card starts item creation with image prefilled; support dragging from filesystem and from other app cards to duplicate items.
  - Quick-swap action: each item card has a "Request/Reserve" toggle that marks an item as "requested" with requester name (entered once via modal); this state is saved and visible to all viewers using the same localStorage (local-only demo of hold functionality).
  - Export/Import: export full data as a JSON file and import to restore or merge collections (file picker). When exporting, include an option to strip images to reduce size.
  - Accessibility & keyboard:
    - All controls reachable by keyboard (Tab order, Enter to activate, Esc to close modals).
    - ARIA labels for forms, role="list"/"listitem" for grid, and high-contrast focus outlines.
    - Provide text alternatives for images and allow toggling reduced-motion mode.
  - Dark/Light auto theme: detect prefers-color-scheme and apply matching theme; include a manual toggle that overrides system preference and stores choice in localStorage.
  - Offline resilience: core features (create/edit/delete/browse) must work without network; show a visual indicator when running from file:// or offline.
  - Compact analytics panel: show simple stats (total items, items per category, percent with images, items requested). No external telemetry.

- UI interactions & behaviors:
  - Clicking a card opens a right-side slide-over detail panel with full data and edit button; keyboard shortcut "N" opens the Add panel; "/" focuses search.
  - Inline validation: required fields highlighted; show a soft warning if export size > 2MB (images can be stripped).
  - Drag reorder not required; dragging an image onto an existing card replaces image after confirmation.
  - When sharing via URL hash, limit length: if encoded state > 1800 chars, enable a "Share snapshot" mode that exports a compressed JSON blob the user can paste into the share URL manually (show instructions).

- Data model (precise fields for implementation):
  - id (string UUID), title (string), category (string), customCategory (optional string), description (string), condition (string: new/good/fair), quantity (integer), tags (array of strings), imageDataUrl (optional string), pickupNotes (string), createdAt (ISO), updatedAt (ISO), requestedBy (optional string), requestedAt (optional ISO).

- Implementation constraints:
  - Single HTML file only, no external libraries or network requests.
  - JavaScript modularized into small functions; avoid transpilation.
  - Keep total implementation feasible under ~1000 LOC (concise code, simple UI).
  - Use localStorage for persistence; import/export uses File API; URL hash used for shareable views.

- Edge cases & validation rules:
  - Prevent duplicate IDs on import by generating new UUIDs for collisions when merging.
  - Limit stored image Data URLs to a configurable max per image (e.g., 1.5 MB) — warn user and offer to strip images.
  - If localStorage is full or unavailable, show clear error and automatic fallback to offer immediate export of data.

- Dev/test checklist (for implementer):
  - Load file locally and in a simple static server; verify create/edit/delete persists.
  - Test drag-and-drop image onto Add card and onto existing card.
  - Test URL hash encoding/decoding for filters and selected item.
  - Test export/import JSON roundtrip including merge behavior.
  - Test keyboard shortcuts: N (new), / (search), Esc (close panels), Enter (submit forms).
  - Verify dark/light auto theme and manual override persist across reloads.
  - Run accessibility quick checks: all interactive elements reachable by keyboard, ARIA labels present, focus outlines visible.

- Minimal UI copy suggestions:
  - App title: "Eco Dropbox"
  - Add button: "List an Item"
  - Request action: "Request / Reserve"
  - Export/Import buttons: "Export Collection" / "Import Collection"

- Deliverable expectation: clear, single-file HTML that any web-savvy implementer can build from this spec in under ~1000 lines of code.

(Generated: 2025-12-21T08:23:44.359680Z, seed=84718, theme=environment & sustainability, extras=drag-and-drop, share via URL hash, dark/light auto theme, kind=html)
