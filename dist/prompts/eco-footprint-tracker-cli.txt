Eco Footprint Tracker (CLI)

- Purpose
  - Single-file Python 3 command-line app to help users log, categorize, and visualize their personal environmental footprint (transport, energy, food, purchases) and track improvement over time.
  - Focus on low-friction daily entry and actionable weekly insights.

- Platform & runtime
  - Pure Python 3, single .py file, standard library only.
  - Runs in a terminal/console; no external dependencies.
  - Uses a JSON file in the same directory for persistence.

- Data model
  - Persistent storage:
    - One JSON file, e.g., "eco_data.json".
    - Top-level keys:
      - "profiles": dict keyed by profile name.
      - Each profile contains:
        - "entries": list of activity records.
        - "goals": optional numeric targets per category.
        - "metadata": created_at, last_used, units ("metric"/"imperial").
  - Entry record fields:
    - id (incrementing integer or UUID-like string).
    - timestamp (ISO 8601 string, local time).
    - date (YYYY-MM-DD string shortcut for grouping).
    - category: one of ["transport", "energy", "food", "purchases", "other"].
    - subcategory (free text, e.g., "car", "train", "beef", "electronics").
    - amount (float).
    - unit (string, e.g., "km", "kWh", "meals", "items").
    - notes (optional short string).
    - co2e_estimate_kg (float, computed using simple per-category factors).
  - Simple emission factors (config within code, not user-editable in UI):
    - transport:
      - "car": 0.18 kg/km (default if subcategory=car).
      - "bus": 0.08 kg/km.
      - "train": 0.04 kg/km.
      - "flight": 0.25 kg/km.
      - unknown subcategory: fallback 0.15 kg/km.
    - energy:
      - "electricity": 0.4 kg/kWh.
      - "gas": 2.0 kg/unit (basic).
      - fallback: 0.5 kg/unit.
    - food:
      - "beef": 27 kg/meal.
      - "chicken": 6.9 kg/meal.
      - "vegetarian": 2.0 kg/meal.
      - fallback: 3.0 kg/meal.
    - purchases:
      - default 10 kg/item.
    - other:
      - default 1.0 kg/unit.

- Core features
  - Multiple profiles:
    - Create, list, switch, rename, and delete profiles from CLI.
    - Remember last-used profile and auto-load at startup.
  - Add entries:
    - Command: add
    - Interactive prompts:
      - Category (with numeric menu 1–5).
      - Subcategory (free text, optional default per category).
      - Amount (float; re-prompt until valid).
      - Unit (default suggested per category).
      - Notes (optional).
      - Date (default: today; allow custom YYYY-MM-DD).
    - Immediate display of computed CO₂e estimate and confirmation.
  - List entries:
    - Command: list
    - Options:
      - --days N (show last N days).
      - --category NAME.
      - --limit N (max items).
    - Displays a compact table:
      - Date | Cat | Subcat | Amount Unit | CO₂e kg | Notes (truncated).
  - Edit/delete entries:
    - Command: edit <id>
      - Show existing entry; allow field-by-field editing (press Enter to keep current value).
      - Recompute CO₂e on save.
    - Command: delete <id>
      - Confirmation prompt; then remove entry.
  - Summary & insights:
    - Command: summary
    - Optional filters: --days N, --week, --month, --category NAME.
    - Output:
      - Total CO₂e for period.
      - Breakdown by category (kg and percentage).
      - Top 3 highest-emission entries in period.
      - A simple ASCII bar chart per category (normalized to terminal width).
  - Weekly goals:
    - Command: goal set <category> <kg_per_week_float>
    - Command: goal show
      - Show current goals and actual emissions for the last full 7 days.
    - Command: goal clear <category>|all
    - In summary/goal show, display whether user is under/over each goal.
  - Trend view:
    - Command: trend
    - Aggregates last 4 full weeks:
      - For each week start date: total CO₂e, plus an ASCII mini-line/bar representation.
      - Indicates direction vs. previous week (arrow text: UP/DOWN/SAME).

- CLI interaction model
  - Entry point:
    - When launched, load or initialize JSON.
    - Show active profile and a brief menu:
      - 1) Add entry
      - 2) Summary
      - 3) Trend
      - 4) Goals
      - 5) Profiles
      - 6) List entries
      - 7) Help
      - 0) Quit
    - Accept either menu numbers or full commands; both mapped to same handlers.
  - Command parser:
    - Accept commands of form:
      - add
      - list [--days N] [--category C] [--limit N]
      - summary [--days N|--week|--month] [--category C]
      - trend
      - goal set C X
      - goal show
      - goal clear C|all
      - profile list|create NAME|switch NAME|rename OLD NEW|delete NAME
      - edit ID
      - delete ID
      - export <filename.csv>
      - help
    - Simple token-based parsing using sys.argv when called directly, and interactive prompt loop when run without args.
  - Input validation:
    - Reject unknown categories, negative amounts, or malformed dates with clear error messages.
    - For all numeric inputs, re-prompt until valid.

- Accessibility & usability (CLI-focused)
  - Clear, high-contrast text and consistent formatting (no reliance on color alone).
  - Do not require use of arrow keys; all operations via text/Enter.
  - Provide concise inline help:
    - Command: help
      - Shows main commands and short examples.
    - Typing an unknown command prints help hint.
  - Support non-interactive usage:
    - If sys.argv contains a recognized command, execute once and exit, printing results; this allows scripting and automated tests.

- Persistence & files
  - Data file:
    - Default path: in same directory as script, named "eco_data.json".
    - If file is missing or invalid JSON, create a new structure after backing up corrupted file with suffix ".bak".
  - Backups:
    - On every write, first write to a temporary file and then atomically replace the main file.
  - Export:
    - Command: export <filename.csv>
    - Write CSV with header: profile,entry_id,date,timestamp,category,subcategory,amount,unit,co2e_kg,notes.

- Implementation details
  - Use only Python standard library:
    - json for persistence.
    - os and pathlib for file paths.
    - datetime for date/time handling and week aggregation.
    - textwrap and shutil.get_terminal_size for readable tables/graphs.
    - argparse or custom simple parser for non-interactive commands.
    - uuid or a simple incremental counter stored per profile for IDs.
  - ASCII bar charts:
    - Determine terminal width (fallback to 80).
    - Scale each category’s bar length proportionally to its CO₂e vs. max in set.
    - Use a single character like "#" for bars.
  - Sorting:
    - When listing entries, sort most recent first.
    - For weekly trend, sort by week start date ascending.

- Testing hooks / demo data
  - Command: demo
    - Optional; populate current profile with a small fixed set of sample entries across different categories and dates for testing charts and summaries (guarded to not overwrite existing data without confirmation).

(Generated: 2026-01-10T12:37:00.729128Z, seed=90086, theme=environment & sustainability, extras=ARIA-compliant components, offline-first with localStorage, responsive grid, kind=py)
