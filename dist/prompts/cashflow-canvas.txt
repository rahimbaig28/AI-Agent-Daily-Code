CashFlow Canvas

- Purpose: Single-page, client-side budgeting dashboard for quickly sketching and tracking monthly cash flow using a flexible, card-based layout. No backend; all data stored in localStorage.

- Overall structure:
  - Single HTML file with:
    - <head> containing inline CSS for a responsive grid layout and print styles.
    - <body> containing:
      - Fixed top toolbar with period selector, quick stats, theme toggle, and print button.
      - Main area split into:
        - Left column: “Incomes” and “Expenses” panels.
        - Right column: “Summary & Insights” panel.
      - Modal/dialog for importing/exporting JSON data.
    - Inline <script> for all behavior and state persistence (no external libraries).

- Data model (in JS):
  - currentPeriod: string (e.g., "2026-01", generic "YYYY-MM").
  - entries: array of objects:
    - id: string/number (unique).
    - type: "income" | "expense".
    - category: string.
    - label: string (description).
    - amount: number.
    - date: string (ISO "YYYY-MM-DD", not validated beyond basic pattern).
    - isPlanned: boolean.
  - categories: simple array of strings for autocomplete and quick selection.
  - settings:
    - theme: "light" | "dark".
    - showPlanned: boolean.
  - All stored in localStorage under a key like "cashflowCanvasData".

- Top toolbar:
  - Left side:
    - App title: “CashFlow Canvas” as an <h1>.
    - Period selector:
      - Two buttons: “◀” (previous month) and “▶” (next month).
      - Text input type="month" (or fallback text input if not supported) to jump to a month.
      - Changing period filters visible entries; all periods remain stored.
  - Center:
    - Inline “Quick Snapshot” summary:
      - Total income, total expenses, net (income - expenses), savings rate (% of income).
      - Net value color-coded: green if >= 0, red if < 0.
  - Right side:
    - Theme toggle button (light/dark) with aria-pressed and visible label.
    - “Print” button triggering window.print().
    - “Import/Export” button to open modal.
  - Toolbar accessibility:
    - role="banner".
    - Buttons focusable with keyboard, Enter/Space activate.
    - ARIA labels for period navigation (e.g., aria-label="Previous month").

- Left column: Incomes & Expenses panels:
  - Layout:
    - On wide screens, two columns side by side.
    - On narrow screens, stacked vertically (Incomes then Expenses).
  - Each panel:
    - <section> with aria-labelledby heading.
    - Heading shows:
      - Panel title: “Incomes” or “Expenses”.
      - Total value for current period.
      - Badge showing count of entries for current period.
    - Add-entry form (always visible at top of each panel):
      - Compact inline form fields:
        - Amount (number input, required, > 0).
        - Category (text input with datalist built from categories array).
        - Label/Description (short text).
        - Date (type="date" defaulting to today; allowed outside period but still shown if it matches currentPeriod month/year).
        - Checkbox “Planned only” (marks isPlanned).
        - Submit button “Add Income” / “Add Expense”.
      - On submit:
        - Validate amount and category minimally.
        - Create entry with type based on panel.
        - Push to entries array.
        - Update categories list if new category.
        - Persist to localStorage and re-render.
      - Enter key in any text/amount field submits form when valid.
    - Entry list:
      - Rendered as CSS grid “cards” for each entry matching:
        - currentPeriod (month/year based on date field).
        - current showPlanned filter (if “hide planned” is active, omit planned entries).
      - Each card displays:
        - Category (prominent).
        - Label/description.
        - Amount (aligned right, colored blue for income, red for expense).
        - Date.
        - Badge “Planned” if isPlanned.
      - Each card controls:
        - Edit button: opens inline edit mode within card:
          - Inputs for category, label, amount, date, planned flag.
          - Save and Cancel buttons.
        - Delete button with confirmation prompt (e.g., confirm()).
      - Keyboard support:
        - Tab navigation between cards and their buttons.
        - Edit/Delete buttons accessible via Enter/Space.
        - aria-label on buttons like “Edit salary income” using label/category.

- Right column: Summary & Insights panel:
  - Layout:
    - <aside> with role="complementary" and aria-labelledby.
  - Sections:
    - Period summary:
      - Total income, expenses, net.
      - Calculated “Savings rate” = (net / income) * 100 (if income > 0).
      - Simple textual guidance:
        - If savings rate < 10%: show message “You’re saving less than 10% this period.”
        - If 10–20%: “You’re within a typical savings range.”
        - If > 20%: “You’re saving a strong portion of income.”
    - Category breakdown:
      - Two subsections: “Top Expense Categories” (and optionally “Income Sources”).
      - Compute totals per category for currentPeriod.
      - Show up to 5 top expense categories:
        - Category name.
        - Total amount.
        - Percentage of total expenses.
        - Visual bar: simple horizontal div with width proportional to percentage.
      - Bar chart accessible:
        - Use aria-label describing total and percentage for screen readers.
    - Planned vs Actual:
      - For each type (income/expense):
        - Calculate:
          - plannedTotal (isPlanned == true).
          - actualTotal (isPlanned == false).
        - Show small comparison row:
          - “Planned: X, Actual: Y, Difference: Y - X.”
        - Color difference (green when underspending vs planned expenses, etc.).
    - Toggles:
      - “Hide planned items in lists” checkbox that toggles showPlanned.
      - Changes only list display; summary always uses all entries.

- Import/Export modal:
  - Triggered by toolbar button; use role="dialog" with aria-modal="true" and aria-labelledby.
  - Content:
    - Textarea to show/export current data as JSON string.
    - Buttons:
      - “Copy to clipboard” (use navigator.clipboard if available; otherwise instruct user to copy manually).
      - “Load JSON”:
        - Reads JSON from textarea.
        - Basic parse and structure validation:
          - If invalid, show error message text in dialog (red).
        - On success, replace current data in localStorage and re-render.
      - “Close” button.
  - Accessibility:
    - Focus trap within modal while open (basic implementation: remember previous focused element, move focus to first focusable in modal, close on Escape, restore focus).
    - aria-describedby text with short instructions.

- Persistence:
  - On app load:
    - Try to read localStorage key.
    - If missing or invalid:
      - Initialize with:
        - A couple of sample entries for current month (one income, two expenses) to demonstrate layout.
    - Apply theme and settings.
  - On any state change (add/edit/delete entry, toggle theme, change settings, import):
    - Serialize and store to localStorage.

- Theming and layout:
  - Use CSS variables for colors (e.g., --bg, --fg, --accent, --card-bg, --danger).
  - Light theme: light background, dark text.
  - Dark theme: dark background, light text; ensure sufficient contrast.
  - Smooth theme transition via CSS (e.g., transition on background-color, color).
  - Responsive grid:
    - Use CSS Grid/Flexbox.
    - Breakpoints:
      - Mobile (< 700px): single column layout; toolbar stacked; panels full width.
      - Tablet (~700–1024px): two columns (left/right).
      - Desktop (>1024px): three-column feel with left column split vertically and right summary narrower or same height.
  - Cards:
    - Subtle box-shadow and border-radius.
    - Focus outlines visible and easily distinguishable.

- Print-friendly view:
  - @media print CSS rules:
    - Hide toolbar actions not relevant to print (theme toggle, import/export, form controls).
    - Show static summaries and lists without buttons.
    - Ensure text is black on white; remove dark theme overrides.
    - Avoid page breaks inside individual entry cards and summary subsections where possible (use page-break-inside: avoid).
    - Show app title and selected period at top of printed page.
  - “Print” button simply triggers window.print().

- Accessibility details:
  - Landmarks:
    - <header> for toolbar.
    - <main> wrapping panels.
    - <aside> for summary.
  - Color contrast tuned for WCAG AA (avoid light grays on white).
  - All interactive elements:
    - Keyboard focusable via standard HTML controls.
    - Use button elements, not generic divs.
    - Provide visible :focus style (e.g., outline with accent color).
  - Use aria-live="polite" region for small status messages:
    - E.g., “Entry added”, “Entry deleted”, “Data imported successfully”.
  - Ensure that icons (if any) have aria-hidden="true" and are paired with visible text labels or aria-labels.

- Error handling and validation:
  - Inline validation for add/edit forms:
    - If amount missing or <= 0, show a small red text under field.
    - If category empty, show message.
  - On failed JSON import:
    - Show human-friendly error: “Invalid JSON: [message]”.
  - Do not block entire app on error; keep last good state in memory until import is confirmed.

- Testing hooks and simple interactions:
  - Easy to test behaviors:
    - Adding incomes/expenses updates totals and summary immediately.
    - Switching period hides entries from other months while preserving them.
    - Toggling “Hide planned items” visibly removes/returns those entries in lists.
    - Editing an entry updates category totals and summary.
    - Deleting an entry decreases totals.
    - Theme toggle persists across reloads.
    - Importing known JSON replaces sample data; exporting then reloading page keeps same state.

(Generated: 2026-01-10T01:27:08.423279Z, seed=99070, theme=finance & budgeting, extras=responsive grid, ARIA-compliant components, print-friendly view, kind=html)
