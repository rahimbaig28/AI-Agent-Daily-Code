Data Sketchpad â€” single-file CSV visualizer (HTML)

- Purpose: A single-file web app (one HTML file with inline CSS & JS) that lets users load CSV files (drag-and-drop or file picker), explore data interactively with small-multiples and linked views, and export printable reports; works offline via localStorage and requires no external libraries.

- Core features (must be implementable in one HTML file):
  - CSV input:
    - Support drag-and-drop onto a clearly marked drop zone and a fallback file input button.
    - Parse CSV robustly (handles quoted fields, header row detection, comma/semicolon/tab separators) in pure JS.
    - Show a preview (first 10 rows) and let user toggle "has header" if detection is wrong.
  - Data discovery panel:
    - List columns with detected type (numeric / categorical / date / text) and simple stats inline (count, unique, missing; numeric: min, max, mean).
    - Allow clicking a column to pin it as the active column for visualizations.
  - Visualizations (SVG/Canvas, no external libs):
    - Auto-generated small-multiples: for up to 6 numeric columns, render mini line / sparkline / histogram thumbnails side-by-side.
    - Main linked view: when a single numeric or date numeric pair is selected, render an interactive chart (scatter, line, or bar depending on types) with axes, grid, pan/zoom (mouse wheel + drag) and point hover tooltips.
    - Brushing: allow rectangular brush selection on main chart that highlights corresponding rows in a data table and updates summary stats.
    - Color by: let user choose a categorical column to color points; provide a simple legend and color assignment.
  - Table & detail:
    - Scrollable data table showing current filtered/selected rows; clicking a row centers/highlights it in the main chart.
    - Keyboard navigation: arrow keys to move selected row; Enter to toggle selection; Esc to clear selection.
  - Search & filters:
    - Column-level quick filters: text search for strings, numeric range slider for numbers, date range picker for dates (simple yyyy-mm-dd inputs).
    - Combine filters with AND; show active filter chips that can be removed.
  - Persistence and offline-first:
    - Persist last loaded dataset (up to 5MB) and UI state (active column, filters, chart type) to localStorage; auto-restore on reload.
    - Provide a "Clear saved" action.
  - Export / print:
    - Print-friendly view: a printer-optimized layout that includes title, data summary, selected chart (rendered as inline SVG), and top 5 rows; a "Print report" button should open the print dialog with the optimized view.
    - Export CSV of filtered/selected rows (download link generated client-side).
    - Export chart as PNG (convert canvas or SVG to PNG and offer download).
  - Accessibility:
    - All controls reachable by keyboard and labeled with aria attributes; drag-and-drop area includes an accessible button fallback.
    - Color palette offers a high-contrast option; maintain focus outlines.
  - Performance safeguards:
    - If CSV > 100k rows, prompt to proceed and automatically sample for visualization (user can choose full or sampled).
    - Use requestAnimationFrame for heavy redraws; virtualize table rows to keep DOM responsive.
  - UX details:
    - Simple top toolbar: App title editable, file actions (Load, Save selection, Clear), undo for last UI change (one level), and Print.
    - Responsive layout: left sidebar for data discovery/filters, central canvas for main chart, right panel for small-multiples and table; collapsible panels for narrow screens.
    - Lightweight styling: single-column readable font, clear contrast, small iconography made with CSS/SVG.
  - Developer constraints:
    - Single HTML file with inline <style> and <script>; no external network requests or libraries.
    - All functionality implemented in under ~1000 lines of code (concise modular JS).
    - Use only browser Web APIs (FileReader, localStorage, canvas/SVG, download via blob URLs).
- Testable acceptance criteria (implementer checklist):
  - Drop a CSV file; app parses and shows preview and column stats.
  - Click a numeric column and render an interactive main chart; hover shows tooltip.
  - Drag a brush rectangle on the chart and see the table highlight matching rows.
  - Apply a text filter and see both chart and table update; use keyboard to navigate rows.
  - Save state to localStorage, reload page, and confirm dataset + UI state restore.
  - Click "Print report" and print-preview shows a clean single-page report with chart and summary.
  - Export filtered rows to CSV and download chart as PNG.
- Non-functional constraints:
  - Work entirely client-side; no server component.
  - Aim for graceful degradation: if browser lacks a feature (e.g., FileSystem), still allow file picker and basic functions.
  - Keep UI responsive: initial load under 200ms for UI shell; parsing and visualization operations should display progress for large files.

(Generated: 2025-12-16T08:28:17.050430Z, seed=41347, theme=data visualization, extras=print-friendly view, drag-and-drop, offline-first with localStorage, kind=html)
