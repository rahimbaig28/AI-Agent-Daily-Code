<!DOCTYPE html>
<html lang="en">
<head>
<!-- Auto-generated via Perplexity on 2025-12-11T04:34:33.585549Z -->

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width,initial-scale=1'>

<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>StudyFlash: CLI Flashcard Manager and Quizzer</title>
<style>
  body {
    font-family: monospace, monospace;
    background: #f9f9f9;
    color: #222;
    margin: 0; padding: 1rem;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }
  h1 {
    font-weight: bold;
    font-size: 1.5rem;
    margin-bottom: 0.5rem;
  }
  #output {
    white-space: pre-wrap;
    background: #fff;
    border: 1px solid #ccc;
    padding: 1rem;
    height: 300px;
    overflow-y: auto;
    margin-bottom: 1rem;
  }
  label, input, button {
    font-family: monospace, monospace;
    font-size: 1rem;
  }
  input[type="text"] {
    width: 100%;
    box-sizing: border-box;
    margin-bottom: 0.5rem;
    padding: 0.3rem;
  }
  button {
    padding: 0.3rem 0.6rem;
    margin-right: 0.3rem;
    cursor: pointer;
  }
  #cmdline {
    width: 100%;
    box-sizing: border-box;
    font-family: monospace, monospace;
    font-size: 1rem;
    padding: 0.3rem;
  }
  #help {
    background: #eef;
    border: 1px solid #99c;
    padding: 0.5rem;
    margin-bottom: 1rem;
    white-space: pre-wrap;
  }
  .hidden {
    display: none;
  }
</style>
</head>
<body>
<h1>StudyFlash CLI Flashcard Manager &amp; Quizzer</h1>
<div id="output" role="log" aria-live="polite" tabindex="0"></div>

<label for="cmdline">Enter command (type <code>help</code> for commands):</label>
<input type="text" id="cmdline" aria-describedby="help" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />

<div id="help" class="hidden" role="region" aria-label="Help information">
Commands:
  add               - Add a new flashcard
  edit <id>         - Edit flashcard by ID
  delete <id>       - Delete flashcard by ID
  list              - List all flashcards
  quiz              - Start quiz mode
  import <filename> - Import flashcards from JSON file
  export <filename> - Export flashcards to JSON file
  stats             - Show current session quiz stats
  help              - Show this help message
  exit              - Exit the program
</div>

<script>
(() => {
  const output = document.getElementById('output');
  const cmdline = document.getElementById('cmdline');
  const helpDiv = document.getElementById('help');

  // Data file key in localStorage
  const STORAGE_KEY = 'studyflash_data';

  // Flashcards data structure: array of {id, question, answer}
  // id is unique integer
  let flashcards = [];
  let nextId = 1;

  // Quiz session stats
  let quizStats = {correct: 0, incorrect: 0};
  let quizActive = false;
  let quizQueue = [];
  let currentQuizCard = null;

  // Load data from localStorage
  function loadData() {
    const raw = localStorage.getItem(STORAGE_KEY);
    if (raw) {
      try {
        const data = JSON.parse(raw);
        if (Array.isArray(data.flashcards)) {
          flashcards = data.flashcards;
          nextId = data.nextId || (flashcards.reduce((max, c) => Math.max(max, c.id), 0) + 1);
        }
      } catch {}
    }
  }

  // Save data to localStorage
  function saveData() {
    const data = {flashcards, nextId};
    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
  }

  // Print text to output area
  function print(text = '') {
    output.textContent += text + '\n';
    output.scrollTop = output.scrollHeight;
  }

  // Clear output area
  function clearOutput() {
    output.textContent = '';
  }

  // Show help
  function showHelp() {
    helpDiv.classList.remove('hidden');
  }

  // Hide help
  function hideHelp() {
    helpDiv.classList.add('hidden');
  }

  // Parse command line input
  function parseCommand(line) {
    const parts = line.trim().split(/\s+/);
    const cmd = parts?.toLowerCase() || '';
    const args = parts.slice(1);
    return {cmd, args};
  }

  // List all flashcards
  function listFlashcards() {
    if (flashcards.length === 0) {
      print('No flashcards available.');
      return;
    }
    print('Flashcards:');
    flashcards.forEach(c => {
      print(`  [${c.id}] Q: ${c.question}\n       A: ${c.answer}`);
    });
  }

  // Add a new flashcard (interactive)
  function addFlashcard() {
    print('Adding a new flashcard.');
    promptInput('Enter question:', question => {
      if (!question.trim()) {
        print('Question cannot be empty. Cancelled.');
        promptCommand();
        return;
      }
      promptInput('Enter answer:', answer => {
        if (!answer.trim()) {
          print('Answer cannot be empty. Cancelled.');
          promptCommand();
          return;
        }
        flashcards.push({id: nextId++, question: question.trim(), answer: answer.trim()});
        saveData();
        print('Flashcard added.');
        promptCommand();
      });
    });
  }

  // Edit flashcard by ID (interactive)
  function editFlashcard(id) {
    const card = flashcards.find(c => c.id === id);
    if (!card) {
      print(`Flashcard with ID ${id} not found.`);
      promptCommand();
      return;
    }
    print(`Editing flashcard [${card.id}]`);
    print(`Current question: ${card.question}`);
    promptInput('Enter new question (leave blank to keep current):', question => {
      if (question.trim()) card.question = question.trim();
      print(`Current answer: ${card.answer}`);
      promptInput('Enter new answer (leave blank to keep current):', answer => {
        if (answer.trim()) card.answer = answer.trim();
        saveData();
        print('Flashcard updated.');
        promptCommand();
      });
    });
  }

  // Delete flashcard by ID
  function deleteFlashcard(id) {
    const idx = flashcards.findIndex(c => c.id === id);
    if (idx === -1) {
      print(`Flashcard with ID ${id} not found.`);
      promptCommand();
      return;
    }
    flashcards.splice(idx, 1);
    saveData();
    print(`Flashcard [${id}] deleted.`);
    promptCommand();
  }

  // Import flashcards from JSON file (simulate file input via prompt)
  function importFlashcards(filename) {
    if (!filename) {
      print('Filename required for import.');
      promptCommand();
      return;
    }
    print(`To import flashcards from "${filename}", paste the JSON content now. End with a single line containing only 'END'.`);
    collectMultilineInput(lines => {
      try {
        const imported = JSON.parse(lines.join('\n'));
        if (!Array.isArray(imported)) throw new Error('JSON must be an array of flashcards');
        let count = 0;
        imported.forEach(c => {
          if (c.question && c.answer) {
            flashcards.push({id: nextId++, question: String(c.question), answer: String(c.answer)});
            count++;
          }
        });
        saveData();
        print(`Imported ${count} flashcards from "${filename}".`);
      } catch (e) {
        print('Error importing flashcards: ' + e.message);
      }
      promptCommand();
    });
  }

  // Export flashcards to JSON file (simulate file output by printing JSON)
  function exportFlashcards(filename) {
    if (!filename) {
      print('Filename required for export.');
      promptCommand();
      return;
    }
    if (flashcards.length === 0) {
      print('No flashcards to export.');
      promptCommand();
      return;
    }
    const exportData = flashcards.map(c => ({question: c.question, answer: c.answer}));
    print(`Exporting flashcards to "${filename}":`);
    print(JSON.stringify(exportData, null, 2));
    promptCommand();
  }

  // Show quiz stats
  function showStats() {
    print(`Quiz session stats: Correct: ${quizStats.correct}, Incorrect: ${quizStats.incorrect}`);
  }

  // Start quiz mode
  function startQuiz() {
    if (flashcards.length === 0) {
      print('No flashcards available to quiz.');
      promptCommand();
      return;
    }
    quizStats = {correct: 0, incorrect: 0};
    quizQueue = shuffleArray(flashcards.slice());
    quizActive = true;
    print('Starting quiz mode. Type your answer and press Enter.');
    quizNext();
  }

  // Quiz next question
  function quizNext() {
    if (quizQueue.length === 0) {
      print('Quiz complete!');
      showStats();
      quizActive = false;
      promptCommand();
      return;
    }
    currentQuizCard = quizQueue.pop();
    print(`Question: ${currentQuizCard.question}`);
    promptInput('Your answer:', userAnswer => {
      if (!quizActive) {
        promptCommand();
        return;
      }
      if (userAnswer.trim().toLowerCase() === currentQuizCard.answer.toLowerCase()) {
        print('Correct!');
        quizStats.correct++;
      } else {
        print(`Incorrect. Correct answer: ${currentQuizCard.answer}`);
        quizStats.incorrect++;
      }
      quizNext();
    });
  }

  // Utility: shuffle array
  function shuffleArray(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  // Interactive prompt input with callback
  let inputCallback = null;
  let multilineMode = false;
  let multilineBuffer = [];

  function promptInput(promptText, callback) {
    print(promptText);
    inputCallback = callback;
    multilineMode = false;
    multilineBuffer = [];
    cmdline.value = '';
    cmdline.focus();
  }

  // Collect multiline input ending with 'END' line
  function collectMultilineInput(callback) {
    print('(Enter multiple lines. Type END on a single line to finish.)');
    inputCallback = callback;
    multilineMode = true;
    multilineBuffer = [];
    cmdline.value = '';
    cmdline.focus();
  }

  // Prompt for command input
  function promptCommand() {
    if (!quizActive) {
      print('');
      print('Enter command (type help for commands):');
      inputCallback = handleCommand;
      multilineMode = false;
      multilineBuffer = [];
      cmdline.value = '';
      cmdline.focus();
    }
  }

  // Handle commands
  function handleCommand(line) {
    if (!line.trim()) {
      promptCommand();
      return;
    }
    const {cmd, args} = parseCommand(line);
    hideHelp();
    switch (cmd) {
      case 'add':
        addFlashcard();
        break;
      case 'edit':
        if (args.length !== 1 || isNaN(args)) {
          print('Usage: edit <id>');
          promptCommand();
          break;
        }
        editFlashcard(Number(args));
        break;
      case 'delete':
        if (args.length !== 1 || isNaN(args)) {
          print('Usage: delete <id>');
          promptCommand();
          break;
        }
        deleteFlashcard(Number(args));
        break;
      case 'list':
        listFlashcards();
        promptCommand();
        break;
      case 'quiz':
        startQuiz();
        break;
      case 'import':
        if (args.length !== 1) {
          print('Usage: import <filename>');
          promptCommand();
          break;
        }
        importFlashcards(args);
        break;
      case 'export':
        if (args.length !== 1) {
          print('Usage: export <filename>');
          promptCommand();
          break;
        }
        exportFlashcards(args);
        break;
      case 'stats':
        showStats();
        promptCommand();
        break;
      case 'help':
        showHelp();
        promptCommand();
        break;
      case 'exit':
        print('Exiting StudyFlash. Goodbye!');
        cmdline.disabled = true;
        break;
      default:
        print(`Unknown command: ${cmd}. Type help for commands.`);
        promptCommand();
        break;
    }
  }

  // On input enter key pressed
  cmdline.addEventListener('keydown', e => {
    if (e.key === 'Enter') {
      e.preventDefault();
      const val = cmdline.value.trim();
      if (multilineMode) {
        if (val === 'END') {
          const cb = inputCallback;
          inputCallback = null;
          multilineMode = false;
          cb(multilineBuffer);
        } else {
          multilineBuffer.push(cmdline.value);
          cmdline.value = '';
        }
      } else {
        if (inputCallback) {
          const cb = inputCallback;
          inputCallback = null;
          cb(val);
        }
      }
    }
  });

  // Initialize
  function init() {
    loadData();
    print('Welcome to StudyFlash CLI Flashcard Manager & Quizzer.');
    print('Type "help" for a list of commands.');
    promptCommand();
  }

  init();
})();
</script>
</body>
</html>