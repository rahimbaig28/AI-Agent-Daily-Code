<!DOCTYPE html>
<html lang="en">
<head>
<!-- Auto-generated via Perplexity on 2025-12-03T13:33:26.060103Z -->

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width,initial-scale=1'>

<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Accessible Clipboard Manager</title>
<style>
  :root {
    --bg-color: #000000;
    --fg-color: #ffffff;
    --highlight-bg: #ffffff;
    --highlight-fg: #000000;
    --font-size: 1.2rem;
    --padding: 0.3em 0.6em;
  }
  body {
    background-color: var(--bg-color);
    color: var(--fg-color);
    font-family: monospace, monospace;
    font-size: var(--font-size);
    margin: 0;
    padding: 1em;
    line-height: 1.4;
  }
  h1 {
    text-align: center;
    margin-bottom: 0.5em;
  }
  #menu {
    max-width: 800px;
    margin: 0 auto 1em auto;
  }
  button, input[type="text"] {
    background-color: var(--bg-color);
    color: var(--fg-color);
    border: 2px solid var(--fg-color);
    padding: var(--padding);
    font-size: var(--font-size);
    cursor: pointer;
    margin: 0.2em 0;
    width: 100%;
    box-sizing: border-box;
  }
  button:focus, input[type="text"]:focus {
    outline: 3px solid var(--highlight-bg);
    outline-offset: 2px;
    background-color: var(--highlight-bg);
    color: var(--highlight-fg);
  }
  #history-list {
    max-width: 800px;
    margin: 0 auto;
    border: 2px solid var(--fg-color);
    padding: 0.5em;
    white-space: pre-wrap;
    word-wrap: break-word;
    max-height: 50vh;
    overflow-y: auto;
  }
  .entry {
    border-bottom: 1px solid var(--fg-color);
    padding: 0.3em 0;
  }
  .entry:last-child {
    border-bottom: none;
  }
  .entry-header {
    font-weight: bold;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .entry-text {
    margin-top: 0.2em;
    white-space: pre-wrap;
  }
  .small-input {
    width: 3em;
    text-align: center;
  }
  #config-section {
    max-width: 800px;
    margin: 1em auto;
    border: 2px solid var(--fg-color);
    padding: 1em;
  }
  label {
    display: block;
    margin-top: 0.5em;
  }
  #status {
    max-width: 800px;
    margin: 1em auto;
    min-height: 1.5em;
    font-weight: bold;
  }
  @media (max-width: 600px) {
    body {
      font-size: 1rem;
    }
  }
</style>
</head>
<body>
<h1>Accessible Clipboard Manager</h1>
<div id="status" role="status" aria-live="polite"></div>
<div id="menu" role="menu" aria-label="Clipboard manager main menu">
  <button id="btn-store" role="menuitem" aria-keyshortcuts="1">1. Store current clipboard entry</button>
  <button id="btn-list" role="menuitem" aria-keyshortcuts="2">2. List clipboard history</button>
  <button id="btn-search" role="menuitem" aria-keyshortcuts="3">3. Search clipboard entries</button>
  <button id="btn-delete" role="menuitem" aria-keyshortcuts="4">4. Delete clipboard entry by number</button>
  <button id="btn-copy" role="menuitem" aria-keyshortcuts="5">5. Copy clipboard entry to system clipboard</button>
  <button id="btn-read" role="menuitem" aria-keyshortcuts="6">6. Read clipboard entry aloud (text-to-speech)</button>
  <button id="btn-export" role="menuitem" aria-keyshortcuts="7">7. Export clipboard history to plain text</button>
  <button id="btn-config" role="menuitem" aria-keyshortcuts="8">8. Configure settings</button>
  <button id="btn-exit" role="menuitem" aria-keyshortcuts="9">9. Exit</button>
</div>

<div id="output" aria-live="polite" style="max-width:800px; margin:1em auto; white-space: pre-wrap;"></div>

<div id="config-section" hidden>
  <h2>Configuration</h2>
  <label for="storage-path-input">Storage file path (JSON):</label>
  <input type="text" id="storage-path-input" aria-describedby="storage-path-desc" />
  <div id="storage-path-desc" style="font-size:0.9em; color:#ccc;">Default: clipboard_history.json in your home directory</div>

  <label for="font-size-input">Font size (e.g. 1.2rem):</label>
  <input type="text" id="font-size-input" aria-describedby="font-size-desc" />

  <label for="color-scheme-select">Color scheme:</label>
  <select id="color-scheme-select" aria-describedby="color-scheme-desc">
    <option value="high-contrast">High Contrast (black background, white text)</option>
    <option value="light">Light (white background, black text)</option>
    <option value="sepia">Sepia (soft brown background)</option>
  </select>
  <div id="color-scheme-desc" style="font-size:0.9em; color:#ccc;">
    Choose a color scheme for better accessibility.
  </div>

  <button id="btn-save-config">Save Configuration</button>
  <button id="btn-cancel-config">Cancel</button>
</div>

<script>
(() => {
  'use strict';

  // Polyfill for clipboard access via execCommand fallback
  function copyTextToClipboard(text) {
    if (navigator.clipboard && navigator.clipboard.writeText) {
      return navigator.clipboard.writeText(text);
    }
    return new Promise((resolve, reject) => {
      const textArea = document.createElement("textarea");
      textArea.value = text;
      textArea.style.position = "fixed";
      textArea.style.top = "-9999px";
      document.body.appendChild(textArea);
      textArea.focus();
      textArea.select();
      try {
        const successful = document.execCommand('copy');
        document.body.removeChild(textArea);
        if (successful) resolve();
        else reject(new Error('Copy command unsuccessful'));
      } catch (err) {
        document.body.removeChild(textArea);
        reject(err);
      }
    });
  }

  // Clipboard read fallback: prompt user to paste manually if navigator.clipboard.readText unavailable
  async function readClipboardText() {
    if (navigator.clipboard && navigator.clipboard.readText) {
      try {
        return await navigator.clipboard.readText();
      } catch {
        return prompt("Unable to read clipboard automatically. Please paste clipboard text here:");
      }
    }
    return prompt("Clipboard API not supported. Please paste clipboard text here:");
  }

  // Text-to-speech using platform TTS commands via JS SpeechSynthesis API fallback
  // Since standard library only, we use Web Speech API if available, else alert fallback
  function speakText(text) {
    if ('speechSynthesis' in window) {
      const utterance = new SpeechSynthesisUtterance(text);
      window.speechSynthesis.speak(utterance);
    } else {
      alert("Text-to-speech not supported in this environment.");
    }
  }

  // Storage keys and defaults
  const DEFAULT_STORAGE_FILENAME = 'clipboard_history.json';
  const DEFAULT_CONFIG = {
    storagePath: DEFAULT_STORAGE_FILENAME,
    fontSize: '1.2rem',
    colorScheme: 'high-contrast'
  };

  // State
  let clipboardHistory = [];
  let config = {...DEFAULT_CONFIG};

  // DOM references
  const statusEl = document.getElementById('status');
  const outputEl = document.getElementById('output');
  const menuEl = document.getElementById('menu');
  const configSection = document.getElementById('config-section');
  const storagePathInput = document.getElementById('storage-path-input');
  const fontSizeInput = document.getElementById('font-size-input');
  const colorSchemeSelect = document.getElementById('color-scheme-select');
  const btnSaveConfig = document.getElementById('btn-save-config');
  const btnCancelConfig = document.getElementById('btn-cancel-config');

  // Utility: save config to localStorage
  function saveConfig() {
    localStorage.setItem('acm_config', JSON.stringify(config));
  }

  // Utility: load config from localStorage
  function loadConfig() {
    try {
      const stored = localStorage.getItem('acm_config');
      if (stored) {
        config = JSON.parse(stored);
      }
    } catch {
      config = {...DEFAULT_CONFIG};
    }
  }

  // Utility: save clipboard history to localStorage (simulate file)
  function saveHistory() {
    try {
      localStorage.setItem('acm_history', JSON.stringify(clipboardHistory));
      setStatus('Clipboard history saved.');
    } catch (e) {
      setStatus('Error saving clipboard history: ' + e.message);
    }
  }

  // Utility: load clipboard history from localStorage (simulate file)
  function loadHistory() {
    try {
      const stored = localStorage.getItem('acm_history');
      if (stored) {
        clipboardHistory = JSON.parse(stored);
      }
    } catch {
      clipboardHistory = [];
    }
  }

  // Set status message
  function setStatus(msg) {
    statusEl.textContent = msg;
  }

  // Clear output area
  function clearOutput() {
    outputEl.textContent = '';
  }

  // Render clipboard history list
  function renderHistory(list) {
    if (!list.length) {
      outputEl.textContent = 'Clipboard history is empty.';
      return;
    }
    let text = '';
    list.forEach((entry, i) => {
      text += `${i + 1}. ${entry}\n\n`;
    });
    outputEl.textContent = text.trim();
  }

  // Prompt user for a number input with validation
  async function promptNumber(message, max) {
    let num;
    do {
      const input = prompt(message);
      if (input === null) return null;
      num = Number(input);
    } while (isNaN(num) || num < 1 || num > max);
    return num;
  }

  // Apply color scheme and font size from config
  function applyAppearance() {
    const root = document.documentElement;
    root.style.setProperty('--font-size', config.fontSize || DEFAULT_CONFIG.fontSize);
    switch (config.colorScheme) {
      case 'light':
        root.style.setProperty('--bg-color', '#ffffff');
        root.style.setProperty('--fg-color', '#000000');
        root.style.setProperty('--highlight-bg', '#000000');
        root.style.setProperty('--highlight-fg', '#ffffff');
        break;
      case 'sepia':
        root.style.setProperty('--bg-color', '#f4ecd8');
        root.style.setProperty('--fg-color', '#5b4636');
        root.style.setProperty('--highlight-bg', '#5b4636');
        root.style.setProperty('--highlight-fg', '#f4ecd8');
        break;
      case 'high-contrast':
      default:
        root.style.setProperty('--bg-color', '#000000');
        root.style.setProperty('--fg-color', '#ffffff');
        root.style.setProperty('--highlight-bg', '#ffffff');
        root.style.setProperty('--highlight-fg', '#000000');
        break;
    }
  }

  // Menu actions
  async function actionStoreClipboard() {
    clearOutput();
    setStatus('Reading clipboard...');
    try {
      const text = await readClipboardText();
      if (!text || !text.trim()) {
        setStatus('Clipboard is empty or unreadable.');
        return;
      }
      if (clipboardHistory.includes(text)) {
        setStatus('Clipboard entry already stored.');
        return;
      }
      clipboardHistory.push(text);
      saveHistory();
      setStatus('Clipboard entry stored.');
    } catch (e) {
      setStatus('Failed to read clipboard: ' + e.message);
    }
  }

  function actionListHistory() {
    clearOutput();
    renderHistory(clipboardHistory);
    setStatus(`Listed ${clipboardHistory.length} clipboard entr${clipboardHistory.length === 1 ? 'y' : 'ies'}.`);
  }

  async function actionSearchEntries() {
    clearOutput();
    const keyword = prompt('Enter keyword to search in clipboard history:');
    if (keyword === null || !keyword.trim()) {
      setStatus('Search cancelled or empty keyword.');
      return;
    }
    const results = clipboardHistory.filter(e => e.toLowerCase().includes(keyword.toLowerCase()));
    if (!results.length) {
      outputEl.textContent = `No entries found containing "${keyword}".`;
      setStatus('No matches found.');
      return;
    }
    renderHistory(results);
    setStatus(`Found ${results.length} entr${results.length === 1 ? 'y' : 'ies'} matching "${keyword}".`);
  }

  async function actionDeleteEntry() {
    clearOutput();
    if (!clipboardHistory.length) {
      setStatus('Clipboard history is empty.');
      return;
    }
    renderHistory(clipboardHistory);
    const num = await promptNumber(`Enter entry number to delete (1-${clipboardHistory.length}):`, clipboardHistory.length);
    if (num === null) {
      setStatus('Delete cancelled.');
      return;
    }
    const removed = clipboardHistory.splice(num - 1, 1);
    saveHistory();
    setStatus(`Deleted entry #${num}: ${removed.slice(0, 30)}${removed.length > 30 ? '...' : ''}`);
    clearOutput();
  }

  async function actionCopyEntry() {
    clearOutput();
    if (!clipboardHistory.length) {
      setStatus('Clipboard history is empty.');
      return;
    }
    renderHistory(clipboardHistory);
    const num = await promptNumber(`Enter entry number to copy to clipboard (1-${clipboardHistory.length}):`, clipboardHistory.length);
    if (num === null) {
      setStatus('Copy cancelled.');
      return;
    }
    const text = clipboardHistory[num - 1];
    try {
      await copyTextToClipboard(text);
      setStatus(`Copied entry #${num} to system clipboard.`);
    } catch (e) {
      setStatus('Failed to copy to clipboard: ' + e.message);
    }
    clearOutput();
  }

  async function actionReadEntry() {
    clearOutput();
    if (!clipboardHistory.length) {
      setStatus('Clipboard history is empty.');
      return;
    }
    renderHistory(clipboardHistory);
    const num = await promptNumber(`Enter entry number to read aloud (1-${clipboardHistory.length}):`, clipboardHistory.length);
    if (num === null) {
      setStatus('Read aloud cancelled.');
      return;
    }
    const text = clipboardHistory[num - 1];
    setStatus(`Reading entry #${num} aloud...`);
    speakText(text);
  }

  function actionExportHistory() {
    clearOutput();
    if (!clipboardHistory.length) {
      setStatus('Clipboard history is empty.');
      return;
    }
    const exportText = clipboardHistory.map((e, i) => `${i + 1}. ${e}`).join('\n\n');
    outputEl.textContent = exportText;
    setStatus('Exported clipboard history as plain text.');
  }

  function showConfig() {
    clearOutput();
    storagePathInput.value = config.storagePath || DEFAULT_CONFIG.storagePath;
    fontSizeInput.value = config.fontSize || DEFAULT_CONFIG.fontSize;
    colorSchemeSelect.value = config.colorScheme || DEFAULT_CONFIG.colorScheme;
    configSection.hidden = false;
    menuEl.setAttribute('aria-hidden', 'true');
    menuEl.style.display = 'none';
    storagePathInput.focus();
  }

  function hideConfig() {
    configSection.hidden = true;
    menuEl.removeAttribute('aria-hidden');
    menuEl.style.display = '';
    clearOutput();
    setStatus('Configuration cancelled.');
  }

  function saveConfigFromUI() {
    const sp = storagePathInput.value.trim();
    const fs = fontSizeInput.value.trim();
    const cs = colorSchemeSelect.value;
    if (sp) config.storagePath = sp;
    else config.storagePath = DEFAULT_CONFIG.storagePath;
    if (fs) config.fontSize = fs;
    else config.fontSize = DEFAULT_CONFIG.fontSize;
    if (cs) config.colorScheme = cs;
    else config.colorScheme = DEFAULT_CONFIG.colorScheme;
    saveConfig();
    applyAppearance();
    configSection.hidden = true;
    menuEl.removeAttribute('aria-hidden');
    menuEl.style.display = '';
    setStatus('Configuration saved.');
    clearOutput();
  }

  function exitApp() {
    clearOutput();
    setStatus('Exiting Accessible Clipboard Manager. Goodbye!');
    // Disable buttons
    Array.from(menuEl.querySelectorAll('button')).forEach(b => b.disabled = true);
  }

  // Keyboard navigation: allow number keys 1-9 to trigger menu buttons
  function onKeyDown(e) {
    if (configSection.hidden) {
      if (e.key >= '1' && e.key <= '9') {
        const idx = Number(e.key) - 1;
        const btn = menuEl.querySelectorAll('button')[idx];
        if (btn && !btn.disabled) {
          btn.click();
          e.preventDefault();
        }
      }
      if (e.key === 'Escape') {
        // Clear output and status
        clearOutput();
        setStatus('');
      }
    } else {
      // In config section, Escape cancels config
      if (e.key === 'Escape') {
        hideConfig();
        e.preventDefault();
      }
    }
  }

  // Initialization
  function init() {
    loadConfig();
    loadHistory();
    applyAppearance();
    setStatus('Accessible Clipboard Manager ready. Use number keys or buttons to navigate.');

    document.getElementById('btn-store').addEventListener('click', actionStoreClipboard);
    document.getElementById('btn-list').addEventListener('click', actionListHistory);
    document.getElementById('btn-search').addEventListener('click', actionSearchEntries);
    document.getElementById('btn-delete').addEventListener('click', actionDeleteEntry);
    document.getElementById('btn-copy').addEventListener('click', actionCopyEntry);
    document.getElementById('btn-read').addEventListener('click', actionReadEntry);
    document.getElementById('btn-export').addEventListener('click', actionExportHistory);
    document.getElementById('btn-config').addEventListener('click', showConfig);
    document.getElementById('btn-exit').addEventListener('click', exitApp);
    btnSaveConfig.addEventListener('click', saveConfigFromUI);
    btnCancelConfig.addEventListener('click', hideConfig);

    window.addEventListener('keydown', onKeyDown);
  }

  // Start
  init();
})();
</script>
</body>
</html>