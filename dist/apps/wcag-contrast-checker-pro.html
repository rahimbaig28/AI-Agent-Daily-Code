<!DOCTYPE html>
<html lang="en">
<head>
<!-- Auto-generated via Perplexity on 2026-01-27T09:47:29.669053Z -->

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width,initial-scale=1'>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WCAG Contrast Checker Pro</title>
<style>
:root {
  --bg-primary: #ffffff;
  --bg-secondary: #f8f9fa;
  --fg-primary: #1a1a1a;
  --fg-secondary: #6c757d;
  --border: #dee2e6;
  --success: #28a745;
  --warning: #ffc107;
  --danger: #dc3545;
  --focus-outline: #007bff;
  --shadow: 0 2px 10px rgba(0,0,0,0.1);
}

[data-theme="dark"] {
  --bg-primary: #1a1a1a;
  --bg-secondary: #2d2d2d;
  --fg-primary: #ffffff;
  --fg-secondary: #adb5bd;
  --border: #495057;
}

* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif; background: var(--bg-primary); color: var(--fg-primary); line-height: 1.5; }
.container { max-width: 1200px; margin: 0 auto; padding: 1rem; }

header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; }
h1 { font-size: 1.8rem; font-weight: 700; }
.theme-toggle { background: none; border: 2px solid var(--border); border-radius: 50px; padding: 0.5rem 1rem; cursor: pointer; color: var(--fg-primary); font-weight: 500; }

.color-panels { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem; }
.color-panel { background: var(--bg-secondary); padding: 1.5rem; border-radius: 12px; border: 1px solid var(--border); }
.color-swatch { width: 100%; height: 120px; border-radius: 8px; margin-bottom: 1rem; border: 2px solid var(--border); cursor: pointer; position: relative; }
.color-input { width: 100%; padding: 0.75rem; border: 1px solid var(--border); border-radius: 6px; font-size: 1rem; margin-bottom: 0.5rem; background: var(--bg-primary); color: var(--fg-primary); }
.sliders { display: grid; grid-template-columns: repeat(3,1fr); gap: 0.5rem; margin-bottom: 1rem; }
.slider { height: 4px; background: var(--border); border-radius: 2px; }
.slider::-webkit-slider-thumb { appearance: none; width: 20px; height: 20px; background: var(--fg-primary); border-radius: 50%; cursor: pointer; }
#eyedropper { position: absolute; top: 10px; right: 10px; background: rgba(0,123,255,0.8); color: white; border: none; border-radius: 50%; width: 32px; height: 32px; cursor: pointer; }

.preview-box { background: var(--bg-secondary); padding: 2rem; border-radius: 12px; margin-bottom: 2rem; text-align: center; border: 1px solid var(--border); }
.contrast-ratio { font-size: 4rem; font-weight: 900; margin-bottom: 1rem; line-height: 1; }
.pass { color: var(--success); }
.fail { color: var(--danger); }
.warning { color: var(--warning); }
.results-grid { display: grid; grid-template-columns: repeat(auto-fit,minmax(200px,1fr)); gap: 1rem; margin-bottom: 1rem; }
.result-item { padding: 1rem; background: var(--bg-primary); border-radius: 8px; border: 1px solid var(--border); text-align: center; }
.suggestions { display: flex; gap: 1rem; justify-content: center; margin-top: 1rem; }
.suggest-btn { padding: 0.75rem 1.5rem; border: none; border-radius: 6px; cursor: pointer; font-weight: 500; }
.lighten { background: #fff3cd; color: #856404; }
.darken { background: #f8d7da; color: #721c24; }

.history { margin-bottom: 2rem; }
.history h3 { margin-bottom: 1rem; }
.history-list { display: grid; gap: 1rem; max-height: 300px; overflow-y: auto; }
.history-item { display: flex; gap: 1rem; padding: 1rem; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border); align-items: center; }
.history-thumb { width: 48px; height: 48px; border-radius: 6px; flex-shrink: 0; }
.history-info { flex: 1; }
.history-actions { display: flex; gap: 0.5rem; }
.btn-small { padding: 0.25rem 0.5rem; border: none; border-radius: 4px; cursor: pointer; font-size: 0.875rem; }

.controls { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-bottom: 2rem; }
.btn { padding: 0.75rem 1.5rem; border: none; border-radius: 6px; cursor: pointer; font-weight: 500; background: var(--fg-secondary); color: var(--bg-primary); }
.btn-primary { background: var(--focus-outline); color: white; }

footer { text-align: center; padding: 2rem 0; border-top: 1px solid var(--border); color: var(--fg-secondary); }

input:focus, button:focus, .slider:focus, .color-swatch:focus { outline: none; box-shadow: 0 0 0 2px var(--focus-outline), 0 0 0 4px rgba(0,123,255,0.25); }
.skip-link { position: absolute; top: -40px; background: var(--focus-outline); color: white; padding: 0.5rem 1rem; text-decoration: none; border-radius: 4px; }
.skip-link:focus { top: 0; }

@media (max-width: 768px) { .color-panels { grid-template-columns: 1fr; } .contrast-ratio { font-size: 2.5rem; } .controls { flex-direction: column; align-items: stretch; } }

@media (prefers-reduced-motion: reduce) { * { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; } }
</style>
</head>
<body>
<a href="#main-content" class="skip-link">Skip to main content</a>
<header role="banner">
  <h1>WCAG Contrast Checker Pro</h1>
  <button id="themeToggle" class="theme-toggle" aria-label="Toggle dark/light mode">üåô</button>
</header>

<main id="main-content" tabindex="-1">
  <section class="color-panels" role="region" aria-label="Color selection">
    <div class="color-panel">
      <h2 id="fgLabel">Foreground Color</h2>
      <div class="color-swatch" id="fgSwatch" style="background: #000000;" role="button" tabindex="0" aria-label="Foreground color swatch">
        <button id="eyedropper" aria-label="Pick foreground color from screen">üé®</button>
      </div>
      <input type="color" id="fgColor" class="color-input" value="#000000" aria-labelledby="fgLabel">
      <div class="sliders">
        <input type="range" id="fgR" class="slider" min="0" max="255" value="0">
        <input type="range" id="fgG" class="slider" min="0" max="255" value="0">
        <input type="range" id="fgB" class="slider" min="0" max="255" value="0">
      </div>
      <button id="copyFg" class="btn">Copy FG</button>
    </div>
    <div class="color-panel">
      <h2 id="bgLabel">Background Color</h2>
      <div class="color-swatch" id="bgSwatch" style="background: #ffffff;" role="button" tabindex="0" aria-label="Background color swatch">
        <button id="eyedropperBg" aria-label="Pick background color from screen">üé®</button>
      </div>
      <input type="color" id="bgColor" class="color-input" value="#ffffff" aria-labelledby="bgLabel">
      <div class="sliders">
        <input type="range" id="bgR" class="slider" min="0" max="255" value="255">
        <input type="range" id="bgG" class="slider" min="0" max="255" value="255">
        <input type="range" id="bgB" class="slider" min="0" max="255" value="255">
      </div>
      <button id="copyBg" class="btn">Copy BG</button>
    </div>
  </section>

  <section class="preview-box" role="region" aria-label="Live preview and results" aria-live="polite">
    <div class="contrast-ratio" id="contrastRatio" aria-label="Contrast ratio">21:1</div>
    <div class="results-grid" id="resultsGrid">
      <!-- Dynamic badges -->
    </div>
    <div class="suggestions">
      <button id="lightenFg" class="suggest-btn lighten">Lighten FG</button>
      <button id="darkenFg" class="suggest-btn darken">Darken FG</button>
      <button id="lightenBg" class="suggest-btn lighten">Lighten BG</button>
      <button id="darkenBg" class="suggest-btn darken">Darken BG</button>
    </div>
  </section>

  <section class="history" role="region" aria-label="Recent checks">
    <h3>Recent Checks</h3>
    <div class="history-list" id="historyList" role="list"></div>
    <div style="text-align: center; margin-top: 1rem;">
      <button id="clearHistory" class="btn">Clear History</button>
    </div>
  </section>

  <div class="controls">
    <button id="exportBtn" class="btn btn-primary">Export History</button>
    <input type="file" id="importFile" accept=".json" style="display: none;">
    <button id="importBtn" class="btn">Import History</button>
    <button id="shareBtn" class="btn btn-primary">Share Current</button>
  </div>
</main>

<footer role="contentinfo">
  <p>WCAG 2.2 AA/AAA compliant contrast checker. All calculations follow official success criteria.</p>
</footer>

<script>
class WCAGContrastChecker {
  constructor() {
    this.fgColor = {r:0,g:0,b:0};
    this.bgColor = {r:255,g:255,b:255};
    this.history = JSON.parse(localStorage.getItem('wcagHistory')) || [];
    this.maxHistory = 20;
    this.init();
  }

  init() {
    this.bindEvents();
    this.loadFromHash();
    this.updateDisplay();
    this.renderHistory();
    this.updateTheme();
  }

  bindEvents() {
    // Color inputs
    ['fgColor','bgColor'].forEach(id => {
      const el = document.getElementById(id);
      el.addEventListener('change', (e) => this.setColorFromHex(id === 'fgColor' ? 'fg' : 'bg', e.target.value));
    });

    // Sliders
    ['fgR','fgG','fgB','bgR','bgG','bgB'].forEach(id => {
      document.getElementById(id).addEventListener('input', (e) => {
        const [type,chan] = id.split(/(fg|bg)([RGB])/i).slice(1,3);
        this.setChannel(type.toLowerCase(), chan.toLowerCase(), +e.target.value);
      });
    });

    // Copy buttons
    document.getElementById('copyFg').onclick = () => this.copyColor('fg');
    document.getElementById('copyBg').onclick = () => this.copyColor('bg');

    // Suggestions
    document.getElementById('lightenFg').onclick = () => this.adjustFg(10);
    document.getElementById('darkenFg').onclick = () => this.adjustFg(-10);
    document.getElementById('lightenBg').onclick = () => this.adjustBg(10);
    document.getElementById('darkenBg').onclick = () => this.adjustBg(-10);

    // History
    document.getElementById('clearHistory').onclick = () => this.clearHistory();

    // Export/Import
    document.getElementById('exportBtn').onclick = () => this.exportHistory();
    document.getElementById('importBtn').onclick = () => document.getElementById('importFile').click();
    document.getElementById('importFile').onchange = (e) => this.importHistory(e.target.files[0]);

    // Share
    document.getElementById('shareBtn').onclick = () => this.shareCurrent();

    // Theme
    document.getElementById('themeToggle').onclick = () => this.toggleTheme();

    // Swatch keyboard
    ['fgSwatch','bgSwatch'].forEach(id => {
      document.getElementById(id).addEventListener('keydown', (e) => {
        if (e.key === 'Enter') document.getElementById(id.replace('Swatch','Color')).focus();
      });
    });

    // Eyedropper (simplified)
    ['eyedropper','eyedropperBg'].forEach((id,i) => {
      document.getElementById(id).onclick = () => {
        const msg = i ? 'Click background color on screen' : 'Click foreground color on screen';
        alert(msg + '\n\nNote: Full eyedropper requires HTTPS. Use color picker above.');
      };
    });

    // Hash change
    window.addEventListener('hashchange', () => this.loadFromHash());
  }

  setColorFromHex(type, hex) {
    try {
      const rgb = this.hexToRgb(hex);
      this[type === 'fg' ? 'fgColor' : 'bgColor'] = rgb;
      this.syncSliders();
      this.updateDisplay();
      this.saveToHistory();
      this.updateHash();
    } catch(e) {
      this.resetInvalid(type);
    }
  }

  setChannel(type, channel, value) {
    this[type === 'fg' ? 'fgColor' : 'bgColor'][channel] = value;
    document.getElementById(type + channel.toUpperCase()).nextSibling.textContent = value;
    this.updateSwatch(type);
    this.updateDisplay();
    this.saveToHistory();
    this.updateHash();
  }

  hexToRgb(hex) {
    const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    if (!result) throw new Error('Invalid hex');
    return {
      r: parseInt(result[1],16),
      g: parseInt(result[2],16),
      b: parseInt(result[3],16)
    };
  }

  rgbToHex(r,g,b) {
    return '#' + [r,g,b].map(x => x.toString(16).padStart(2,'0')).join('');
  }

  updateSwatch(type) {
    const color = this[type === 'fg' ? 'fgColor' : 'bgColor'];
    const swatch = document.getElementById(type + 'Swatch');
    swatch.style.background = this.rgbToHex(color.r, color.g, color.b);
  }

  syncSliders() {
    ['fg','bg'].forEach(type => {
      const color = this[type + 'Color'];
      ['r','g','b'].forEach(ch => {
        document.getElementById(type + ch.toUpperCase()).value = color[ch];
      });
    });
  }

  getContrast() {
    const l1 = this.getLuminance(this.fgColor) + 0.05;
    const l2 = this.getLuminance(this.bgColor) + 0.05;
    return (Math.max(l1,l2) / Math.min(l1,l2)).toFixed(2);
  }

  getLuminance({r,g,b}) {
    const [rs,gs,bs] = [r,g,b].map(c => {
      c /= 255;
      return c <= 0.03928 ? c/12.92 : Math.pow((c+0.055)/1.055, 2.4);
    });
    return 0.2126 * rs + 0.7152 * gs + 0.0722 * bs;
  }

  updateDisplay() {
    const ratio = this.getContrast();
    const ratioEl = document.getElementById('contrastRatio');
    ratioEl.textContent = ratio + ':1';
    ratioEl.className = ratio >= 7 ? 'pass' : ratio >= 4.5 ? 'warning' : 'fail';
    ratioEl.setAttribute('aria-label', `Contrast ratio ${ratio}:1`);
    
    this.updateResults(ratio);
    ['fg','bg'].forEach(type => this.updateSwatch(type));
  }

  updateResults(ratio) {
    const criteria = {
      'AA Normal': 4.5,
      'AA Large': 3,
      'AAA Normal': 7,
      'AAA Large': 4.5
    };
    const grid = document.getElementById('resultsGrid');
    grid.innerHTML = Object.entries(criteria).map(([name,min]) => {
      const pass = ratio >= min;
      return `
        <div class="result-item ${pass ? 'pass' : 'fail'}">
          <strong>${name}</strong><br>
          <span style="font-size: 1.2rem;">${pass ? '‚úì Pass' : '‚úó Fail'}</span>
        </div>
      `;
    }).join('');
  }

  saveToHistory() {
    const entry = {
      fg: this.rgbToHex(this.fgColor.r, this.fgColor.g, this.fgColor.b),
      bg: this.rgbToHex(this.bgColor.r, this.bgColor.g, this.bgColor.b),
      ratio: this.getContrast(),
      timestamp: Date.now()
    };
    this.history.unshift(entry);
    if (this.history.length > this.maxHistory) this.history = this.history.slice(0, this.maxHistory);
    localStorage.setItem('wcagHistory', JSON.stringify(this.history));
    this.renderHistory();
  }

  renderHistory() {
    const list = document.getElementById('historyList');
    list.innerHTML = this.history.map((entry, i) => `
      <div class="history-item" role="listitem">
        <div class="history-thumb" style="background: linear-gradient(135deg, ${entry.fg} 0%, ${entry.fg} 50%, ${entry.bg} 50%, ${entry.bg} 100%);"></div>
        <div class="history-info">
          <strong>${entry.ratio}:1</strong><br>
          <small>${new Date(entry.timestamp).toLocaleString()}</small>
        </div>
        <div class="history-actions">
          <button onclick="checker.loadColors('${entry.fg}','${entry.bg}')" aria-label="Load this check">Load</button>
          <button onclick="checker.removeHistory(${i})" aria-label="Delete this check">√ó</button>
        </div>
      </div>
    `).join('');
  }

  loadColors(fgHex, bgHex) {
    this.setColorFromHex('fg', fgHex);
    this.setColorFromHex('bg', bgHex);
  }

  removeHistory(index) {
    this.history.splice(index, 1);
    localStorage.setItem('wcagHistory', JSON.stringify(this.history));
    this.renderHistory();
  }

  clearHistory() {
    if (confirm('Clear all history?')) {
      this.history = [];
      localStorage.removeItem('wcagHistory');
      this.renderHistory();
    }
  }

  copyColor(type) {
    const hex = this.rgbToHex(this[type + 'Color'].r, this[type + 'Color'].g, this[type + 'Color'].b);
    navigator.clipboard.writeText(hex).then(() => {
      const btn = document.getElementById('copy' + type.toUpperCase());
      const orig = btn.textContent;
      btn.textContent = 'Copied!';
      setTimeout(() => btn.textContent = orig, 1500);
    });
  }

  adjustFg(delta) {
    ['r','g','b'].forEach(ch => {
      this.fgColor[ch] = Math.max(0, Math.min(255, this.fgColor[ch] + delta));
    });
    this.syncSliders();
    this.updateDisplay();
  }

  adjustBg(delta) {
    ['r','g','b'].forEach(ch => {
      this.bgColor[ch] = Math.max(0, Math.min(255, this.bgColor[ch] - delta));
    });
    this.syncSliders();
    this.updateDisplay();
  }

  updateHash() {
    const fgHex = this.rgbToHex(this.fgColor.r, this.fgColor.g, this.fgColor.b).slice(1);
    const bgHex = this.rgbToHex(this.bgColor.r, this.bgColor.g, this.bgColor.b).slice(1);
    window.location.hash = `fg=${fgHex}&bg=${bgHex}`;
  }

  loadFromHash() {
    const params = new URLSearchParams(window.location.hash.slice(1));
    const fg = params.get('fg');
    const bg = params.get('bg');
    if (fg && bg) {
      try {
        this.setColorFromHex('fg', '#' + fg);
        this.setColorFromHex('bg', '#' + bg);
      } catch(e) {}
    }
  }

  exportHistory() {
    const data = JSON.stringify(this.history, null, 2);
    const blob = new Blob([data], {type: 'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `wcag-history-${Date.now()}.json`;
    a.click();
  }

  async importHistory(file) {
    if (!file) return;
    try {
      const text = await file.text();
      const data = JSON.parse(text);
      if (Array.isArray(data)) {
        this.history = data.slice(0, this.maxHistory);
        localStorage.setItem('wcagHistory', JSON.stringify(this.history));
        this.renderHistory();
      }
    } catch(e) {
      alert('Invalid JSON file');
    }
  }

  toggleTheme() {
    const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
    document.documentElement.setAttribute('data-theme', isDark ? 'light' : 'dark');
    localStorage.setItem('wcagTheme', isDark ? 'light' : 'dark');
    document.getElementById('themeToggle').textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
  }

  updateTheme() {
    const saved = localStorage.getItem('wcagTheme');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const isDark = saved === 'dark' || (!saved && prefersDark);
    document.documentElement.setAttribute('data-theme', isDark ? 'dark' : 'light');
    document.getElementById('themeToggle').textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
  }

  resetInvalid(type) {
    if (type === 'fg') {
      this.fgColor = {r:0,g:0,b:0};
    } else {
      this.bgColor = {r:255,g:255,b:255};
    }
    this.syncSliders();
    this.updateDisplay();
  }
}

const checker = new WCAGContrastChecker();
window.checker = checker; // Global for history buttons
</script>
</body>
</html>