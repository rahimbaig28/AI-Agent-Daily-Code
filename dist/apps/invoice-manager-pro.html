<!DOCTYPE html>
<html lang="en">
<head>
<!-- Auto-generated via Perplexity on 2025-12-11T01:28:25.271631Z -->

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width,initial-scale=1'>

<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Invoice Manager Pro</title>
<style>
  :root {
    --color-bg: #f9f9f9;
    --color-primary: #2a7ae2;
    --color-primary-dark: #1a5acb;
    --color-text: #222;
    --color-muted: #666;
    --color-error: #d9534f;
    --color-success: #28a745;
    --color-border: #ccc;
    --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
      Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
  }
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    font-family: var(--font-family);
    background: var(--color-bg);
    color: var(--color-text);
    line-height: 1.4;
  }
  header {
    position: sticky;
    top: 0;
    background: white;
    border-bottom: 1px solid var(--color-border);
    display: flex;
    align-items: center;
    padding: 0.5rem 1rem;
    z-index: 10;
  }
  header h1 {
    font-size: 1.25rem;
    margin: 0;
    flex-grow: 1;
  }
  header button, header input[type="search"] {
    margin-left: 0.5rem;
    font-size: 1rem;
    padding: 0.3rem 0.6rem;
    border: 1px solid var(--color-border);
    border-radius: 4px;
    background: white;
    color: var(--color-text);
  }
  header button:hover, header button:focus,
  header input[type="search"]:focus {
    outline: 2px solid var(--color-primary);
    border-color: var(--color-primary);
  }
  main {
    padding: 1rem;
    max-width: 1200px;
    margin: 0 auto;
  }
  #invoice-list {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(280px,1fr));
    gap: 1rem;
  }
  .invoice-card {
    background: white;
    border: 1px solid var(--color-border);
    border-radius: 6px;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }
  .invoice-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.5rem;
    font-weight: 600;
  }
  .invoice-client {
    flex-grow: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  .invoice-date {
    color: var(--color-muted);
    font-size: 0.9rem;
    margin-left: 0.5rem;
    white-space: nowrap;
  }
  .invoice-amount {
    font-weight: 700;
    font-size: 1.1rem;
    margin-bottom: 0.25rem;
  }
  .invoice-status {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--color-success);
  }
  .invoice-status.unpaid {
    color: var(--color-error);
  }
  .invoice-actions {
    margin-top: 0.5rem;
    display: flex;
    justify-content: flex-end;
    gap: 0.5rem;
  }
  .invoice-actions button {
    font-size: 0.9rem;
    padding: 0.3rem 0.6rem;
    border: 1px solid var(--color-border);
    border-radius: 4px;
    background: white;
    cursor: pointer;
  }
  .invoice-actions button:hover,
  .invoice-actions button:focus {
    outline: 2px solid var(--color-primary);
    border-color: var(--color-primary);
  }
  form {
    background: white;
    border: 1px solid var(--color-border);
    border-radius: 6px;
    padding: 1rem;
    margin-bottom: 1rem;
  }
  form > div {
    margin-bottom: 0.75rem;
  }
  label {
    display: block;
    font-weight: 600;
    margin-bottom: 0.25rem;
  }
  input[type="text"],
  input[type="number"],
  input[type="date"],
  select {
    width: 100%;
    padding: 0.3rem 0.5rem;
    font-size: 1rem;
    border: 1px solid var(--color-border);
    border-radius: 4px;
  }
  input[type="text"]:focus,
  input[type="number"]:focus,
  input[type="date"]:focus,
  select:focus {
    outline: 2px solid var(--color-primary);
    border-color: var(--color-primary);
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 0.5rem;
  }
  th, td {
    border: 1px solid var(--color-border);
    padding: 0.3rem 0.5rem;
    text-align: left;
  }
  th {
    background: #eee;
  }
  .item-row input[type="text"],
  .item-row input[type="number"] {
    width: 100%;
    box-sizing: border-box;
    border: none;
    background: transparent;
    font-size: 1rem;
    padding: 0;
    margin: 0;
  }
  .item-row input[type="text"]:focus,
  .item-row input[type="number"]:focus {
    outline: none;
    background: #ffffcc;
  }
  .btn-inline {
    background: none;
    border: none;
    color: var(--color-error);
    cursor: pointer;
    font-weight: 700;
    font-size: 1.2rem;
    line-height: 1;
    padding: 0 0.2rem;
  }
  .btn-inline:focus {
    outline: 2px solid var(--color-primary);
  }
  .totals {
    margin-top: 0.75rem;
    font-weight: 600;
    font-size: 1rem;
    display: flex;
    justify-content: flex-end;
    gap: 1.5rem;
  }
  .totals div {
    min-width: 100px;
    text-align: right;
  }
  .empty-state {
    text-align: center;
    margin-top: 4rem;
    color: var(--color-muted);
  }
  .empty-state p {
    max-width: 400px;
    margin: 0 auto 1rem;
  }
  .print-view {
    display: none;
  }
  @media print {
    body {
      background: white;
      color: black;
    }
    header, #invoice-list, #search-container, #add-invoice-btn, #print-toggle-btn {
      display: none !important;
    }
    .print-view {
      display: block;
      width: 210mm;
      min-height: 297mm;
      padding: 20mm;
      margin: auto;
      box-sizing: border-box;
      font-size: 12pt;
      font-family: var(--font-family);
      color: var(--color-text);
    }
    .print-invoice {
      border: none;
      page-break-after: always;
    }
    .print-invoice:last-child {
      page-break-after: auto;
    }
    .print-header {
      text-align: center;
      margin-bottom: 1rem;
    }
    .print-client, .print-date, .print-status {
      margin-bottom: 0.25rem;
    }
    .print-items {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 1rem;
    }
    .print-items th, .print-items td {
      border: 1px solid #000;
      padding: 0.25rem 0.5rem;
      text-align: left;
    }
    .print-totals {
      text-align: right;
      font-weight: 700;
      margin-top: 0.5rem;
    }
  }
</style>
</head>
<body>
<header role="banner" aria-label="Main navigation">
  <h1>Invoice Manager Pro</h1>
  <button id="add-invoice-btn" aria-label="Add new invoice" type="button">Add Invoice</button>
  <input id="search-input" type="search" aria-label="Search invoices by client or status" placeholder="Search client or status" />
  <button id="print-toggle-btn" aria-pressed="false" type="button" aria-label="Toggle print view">Print View</button>
</header>
<main role="main">
  <section id="form-section" aria-label="Invoice form" hidden>
    <form id="invoice-form" novalidate>
      <fieldset>
        <legend>Invoice Details</legend>
        <div>
          <label for="client-name">Client Name</label>
          <input id="client-name" name="clientName" type="text" required autocomplete="off" />
        </div>
        <div>
          <label for="invoice-date">Date</label>
          <input id="invoice-date" name="date" type="date" required />
        </div>
        <div>
          <label for="tax-percent">Tax %</label>
          <input id="tax-percent" name="taxPercent" type="number" min="0" max="100" step="0.01" value="0" required />
        </div>
      </fieldset>
      <fieldset>
        <legend>Items</legend>
        <table aria-label="Invoice items">
          <thead>
            <tr>
              <th scope="col">Description</th>
              <th scope="col">Quantity</th>
              <th scope="col">Price</th>
              <th scope="col">Total</th>
              <th scope="col" aria-label="Remove item"></th>
            </tr>
          </thead>
          <tbody id="items-tbody">
          </tbody>
        </table>
        <button id="add-item-btn" type="button" aria-label="Add item">+ Add Item</button>
      </fieldset>
      <div class="totals" aria-live="polite" aria-atomic="true">
        <div>Subtotal: <span id="subtotal">0.00</span></div>
        <div>Tax: <span id="tax-amount">0.00</span></div>
        <div>Total: <span id="total-amount">0.00</span></div>
      </div>
      <div style="margin-top:1rem; display:flex; gap:1rem; justify-content:flex-end;">
        <button type="submit" id="save-btn">Save</button>
        <button type="button" id="cancel-btn">Cancel</button>
      </div>
    </form>
  </section>
  <section id="empty-state" class="empty-state" aria-live="polite" aria-atomic="true" hidden>
    <p>No invoices found. Click "Add Invoice" to create your first invoice.</p>
  </section>
  <section id="invoice-list" aria-label="List of invoices" tabindex="0"></section>
  <section id="print-view" class="print-view" aria-label="Print view of invoices" hidden></section>
</main>
<script>
  (() => {
    "use strict";

    // Elements
    const addInvoiceBtn = document.getElementById("add-invoice-btn");
    const printToggleBtn = document.getElementById("print-toggle-btn");
    const searchInput = document.getElementById("search-input");
    const invoiceList = document.getElementById("invoice-list");
    const formSection = document.getElementById("form-section");
    const invoiceForm = document.getElementById("invoice-form");
    const clientNameInput = document.getElementById("client-name");
    const invoiceDateInput = document.getElementById("invoice-date");
    const taxPercentInput = document.getElementById("tax-percent");
    const itemsTbody = document.getElementById("items-tbody");
    const addItemBtn = document.getElementById("add-item-btn");
    const subtotalSpan = document.getElementById("subtotal");
    const taxAmountSpan = document.getElementById("tax-amount");
    const totalAmountSpan = document.getElementById("total-amount");
    const cancelBtn = document.getElementById("cancel-btn");
    const emptyState = document.getElementById("empty-state");
    const printViewSection = document.getElementById("print-view");

    // State
    let invoices = [];
    let editingInvoiceId = null;
    let printViewActive = false;

    // Helpers
    function saveInvoices() {
      localStorage.setItem("invoices", JSON.stringify(invoices));
    }
    function loadInvoices() {
      try {
        const data = localStorage.getItem("invoices");
        invoices = data ? JSON.parse(data) : [];
      } catch {
        invoices = [];
      }
    }
    function formatDateISOToLocal(dateISO) {
      if (!dateISO) return "";
      const d = new Date(dateISO);
      if (isNaN(d)) return "";
      return d.toLocaleDateString(undefined, { year: "numeric", month: "short", day: "numeric" });
    }
    function formatCurrency(num) {
      return num.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    }
    function generateId() {
      return "inv-" + Math.random().toString(36).slice(2, 10);
    }
    function createItemRow(item = { description: "", quantity: 1, price: 0 }) {
      const tr = document.createElement("tr");
      tr.className = "item-row";

      const descTd = document.createElement("td");
      const descInput = document.createElement("input");
      descInput.type = "text";
      descInput.name = "description";
      descInput.value = item.description;
      descInput.required = true;
      descInput.autocomplete = "off";
      descInput.setAttribute("aria-label", "Item description");
      descTd.appendChild(descInput);

      const qtyTd = document.createElement("td");
      const qtyInput = document.createElement("input");
      qtyInput.type = "number";
      qtyInput.name = "quantity";
      qtyInput.min = "0";
      qtyInput.step = "1";
      qtyInput.value = item.quantity;
      qtyInput.required = true;
      qtyInput.setAttribute("aria-label", "Item quantity");
      qtyTd.appendChild(qtyInput);

      const priceTd = document.createElement("td");
      const priceInput = document.createElement("input");
      priceInput.type = "number";
      priceInput.name = "price";
      priceInput.min = "0";
      priceInput.step = "0.01";
      priceInput.value = item.price;
      priceInput.required = true;
      priceInput.setAttribute("aria-label", "Item price");
      priceTd.appendChild(priceInput);

      const totalTd = document.createElement("td");
      totalTd.className = "item-total";
      totalTd.textContent = formatCurrency(item.quantity * item.price);

      const removeTd = document.createElement("td");
      const removeBtn = document.createElement("button");
      removeBtn.type = "button";
      removeBtn.className = "btn-inline";
      removeBtn.setAttribute("aria-label", "Remove item");
      removeBtn.textContent = "Ã—";
      removeBtn.addEventListener("click", () => {
        tr.remove();
        updateTotals();
      });
      removeTd.appendChild(removeBtn);

      tr.appendChild(descTd);
      tr.appendChild(qtyTd);
      tr.appendChild(priceTd);
      tr.appendChild(totalTd);
      tr.appendChild(removeTd);

      // Update total on input change
      [descInput, qtyInput, priceInput].forEach(input => {
        input.addEventListener("input", () => {
          const q = parseFloat(qtyInput.value);
          const p = parseFloat(priceInput.value);
          totalTd.textContent = (isNaN(q) || isNaN(p)) ? "0.00" : formatCurrency(q * p);
          updateTotals();
        });
      });

      return tr;
    }
    function updateTotals() {
      let subtotal = 0;
      for (const row of itemsTbody.querySelectorAll("tr")) {
        const qty = parseFloat(row.querySelector('input[name="quantity"]').value);
        const price = parseFloat(row.querySelector('input[name="price"]').value);
        if (!isNaN(qty) && !isNaN(price)) subtotal += qty * price;
      }
      const taxPercent = parseFloat(taxPercentInput.value);
      const taxAmount = isNaN(taxPercent) ? 0 : (subtotal * taxPercent) / 100;
      const total = subtotal + taxAmount;
      subtotalSpan.textContent = formatCurrency(subtotal);
      taxAmountSpan.textContent = formatCurrency(taxAmount);
      totalAmountSpan.textContent = formatCurrency(total);
    }
    function clearForm() {
      invoiceForm.reset();
      itemsTbody.innerHTML = "";
      addItemRow();
      updateTotals();
      editingInvoiceId = null;
    }
    function addItemRow(item) {
      const row = createItemRow(item);
      itemsTbody.appendChild(row);
    }
    function validateForm() {
      if (!clientNameInput.value.trim()) return false;
      if (!invoiceDateInput.value) return false;
      if (taxPercentInput.value === "" || isNaN(parseFloat(taxPercentInput.value))) return false;
      if (itemsTbody.children.length === 0) return false;
      for (const row of itemsTbody.children) {
        const desc = row.querySelector('input[name="description"]').value.trim();
        const qty = parseFloat(row.querySelector('input[name="quantity"]').value);
        const price = parseFloat(row.querySelector('input[name="price"]').value);
        if (!desc || isNaN(qty) || qty < 0 || isNaN(price) || price < 0) return false;
      }
      return true;
    }
    function renderInvoiceCard(inv) {
      const card = document.createElement("article");
      card.className = "invoice-card";
      card.tabIndex = 0;
      card.setAttribute("role", "region");
      card.setAttribute("aria-label", `Invoice for ${inv.clientName}, date ${formatDateISOToLocal(inv.date)}, amount ${formatCurrency(inv.total)}, status ${inv.status}`);

      const header = document.createElement("div");
      header.className = "invoice-header";

      const clientSpan = document.createElement("span");
      clientSpan.className = "invoice-client";
      clientSpan.textContent = inv.clientName;

      const dateSpan = document.createElement("span");
      dateSpan.className = "invoice-date";
      dateSpan.textContent = formatDateISOToLocal(inv.date);

      header.appendChild(clientSpan);
      header.appendChild(dateSpan);

      const amountDiv = document.createElement("div");
      amountDiv.className = "invoice-amount";
      amountDiv.textContent = "$" + formatCurrency(inv.total);

      const statusDiv = document.createElement("div");
      statusDiv.className = "invoice-status";
      statusDiv.textContent = inv.status;
      if (inv.status.toLowerCase() === "unpaid") {
        statusDiv.classList.add("unpaid");
      }

      const actionsDiv = document.createElement("div");
      actionsDiv.className = "invoice-actions";

      const editBtn = document.createElement("button");
      editBtn.type = "button";
      editBtn.textContent = "Edit";
      editBtn.setAttribute("aria-label", `Edit invoice for ${inv.clientName}`);
      editBtn.addEventListener("click", () => {
        openFormForEdit(inv.id);
      });

      const deleteBtn = document.createElement("button");
      deleteBtn.type = "button";
      deleteBtn.textContent = "Delete";
      deleteBtn.setAttribute("aria-label", `Delete invoice for ${inv.clientName}`);
      deleteBtn.addEventListener("click", () => {
        if (confirm(`Are you sure you want to delete the invoice for ${inv.clientName}?`)) {
          invoices = invoices.filter(i => i.id !== inv.id);
          saveInvoices();
          renderInvoices();
          if (editingInvoiceId === inv.id) {
            closeForm();
          }
        }
      });

      actionsDiv.appendChild(editBtn);
      actionsDiv.appendChild(deleteBtn);

      card.appendChild(header);
      card.appendChild(amountDiv);
      card.appendChild(statusDiv);
      card.appendChild(actionsDiv);

      return card;
    }
    function renderInvoices(filter = "") {
      invoiceList.innerHTML = "";
      const lowerFilter = filter.trim().toLowerCase();
      const filtered = invoices.filter(inv => {
        if (!lowerFilter) return true;
        return inv.clientName.toLowerCase().includes(lowerFilter) || inv.status.toLowerCase().includes(lowerFilter);
      });
      if (filtered.length === 0) {
        emptyState.hidden = false;
        invoiceList.hidden = true;
      } else {
        emptyState.hidden = true;
        invoiceList.hidden = false;
        filtered.forEach(inv => {
          invoiceList.appendChild(renderInvoiceCard(inv));
        });
      }
      renderPrintView(filtered);
    }
    function openFormForEdit(id) {
      const inv = invoices.find(i => i.id === id);
      if (!inv) return;
      editingInvoiceId = id;
      formSection.hidden = false;
      invoiceList.hidden = true;
      emptyState.hidden = true;
      addInvoiceBtn.disabled = true;
      searchInput.disabled = true;
      printToggleBtn.disabled = true;

      clientNameInput.value = inv.clientName;
      invoiceDateInput.value = inv.date;
      taxPercentInput.value = inv.taxPercent.toString();

      itemsTbody.innerHTML = "";
      inv.items.forEach(item => addItemRow(item));
      updateTotals();

      clientNameInput.focus();
    }
    function closeForm() {
      formSection.hidden = true;
      addInvoiceBtn.disabled = false;
      searchInput.disabled = false;
      printToggleBtn.disabled = false;
      editingInvoiceId = null;
      renderInvoices(searchInput.value);
    }
    function openFormForNew() {
      clearForm();
      formSection.hidden = false;
      invoiceList.hidden = true;
      emptyState.hidden = true;
      addInvoiceBtn.disabled = true;
      searchInput.disabled = true;
      printToggleBtn.disabled = true;
      clientNameInput.focus();
    }
    function gatherFormData() {
      const clientName = clientNameInput.value.trim();
      const date = invoiceDateInput.value;
      const taxPercent = parseFloat(taxPercentInput.value) || 0;
      const items = [];
      for (const row of itemsTbody.children) {
        const description = row.querySelector('input[name="description"]').value.trim();
        const quantity = parseFloat(row.querySelector('input[name="quantity"]').value);
        const price = parseFloat(row.querySelector('input[name="price"]').value);
        if (description && !isNaN(quantity) && !isNaN(price)) {
          items.push({ description, quantity, price });
        }
      }
      let subtotal = 0;
      items.forEach(i => subtotal += i.quantity * i.price);
      const taxAmount = (subtotal * taxPercent) / 100;
      const total = subtotal + taxAmount;
      const status = total > 0 ? "Unpaid" : "Paid"; // default status
      return { clientName, date, taxPercent, items, subtotal, taxAmount, total, status };
    }
    function renderPrintView(invoicesToPrint) {
      printViewSection.innerHTML = "";
      if (!printViewActive) {
        printViewSection.hidden = true;
        return;
      }
      printViewSection.hidden = false;
      invoicesToPrint.forEach(inv => {
        const div = document.createElement("div");
        div.className = "print-invoice";

        const header = document.createElement("header");
        header.className = "print-header";
        const h2 = document.createElement("h2");
        h2.textContent = "Invoice";
        header.appendChild(h2);
        div.appendChild(header);

        const clientP = document.createElement("p");
        clientP.className = "print-client";
        clientP.textContent = `Client: ${inv.clientName}`;
        div.appendChild(clientP);

        const dateP = document.createElement("p");
        dateP.className = "print-date";
        dateP.textContent = `Date: ${formatDateISOToLocal(inv.date)}`;
        div.appendChild(dateP);

        const statusP = document.createElement("p");
        statusP.className = "print-status";
        statusP.textContent = `Status: ${inv.status}`;
        div.appendChild(statusP);

        const table = document.createElement("table");
        table.className = "print-items";
        const thead = document.createElement("thead");
        thead.innerHTML = `<tr><th>Description</th><th>Quantity</th><th>Price</th><th>Total</th></tr>`;
        table.appendChild(thead);
        const tbody = document.createElement("tbody");
        inv.items.forEach(item => {
          const tr = document.createElement("tr");
          const tdDesc = document.createElement("td");
          tdDesc.textContent = item.description;
          const tdQty = document.createElement("td");
          tdQty.textContent = item.quantity;
          const tdPrice = document.createElement("td");
          tdPrice.textContent = "$" + formatCurrency(item.price);
          const tdTotal = document.createElement("td");
          tdTotal.textContent = "$" + formatCurrency(item.quantity * item.price);
          tr.appendChild(tdDesc);
          tr.appendChild(tdQty);
          tr.appendChild(tdPrice);
          tr.appendChild(tdTotal);
          tbody.appendChild(tr);
        });
        table.appendChild(tbody);
        div.appendChild(table);

        const totalsDiv = document.createElement("div");
        totalsDiv.className = "print-totals";
        totalsDiv.innerHTML = `
          Subtotal: $${formatCurrency(inv.subtotal)}<br />
          Tax (${formatCurrency(inv.taxPercent)}%): $${formatCurrency(inv.taxAmount)}<br />
          <strong>Total: $${formatCurrency(inv.total)}</strong>
        `;
        div.appendChild(totalsDiv);

        printViewSection.appendChild(div);
      });
    }

    // Event Listeners
    addInvoiceBtn.addEventListener("click", () => {
      openFormForNew();
    });
    cancelBtn.addEventListener("click", e => {
      e.preventDefault();
      closeForm();
    });
    addItemBtn.addEventListener("click", () => {
      addItemRow();
    });
    taxPercentInput.addEventListener("input", updateTotals);
    itemsTbody.addEventListener("input", updateTotals);
    invoiceForm.addEventListener("submit", e => {
      e.preventDefault();
      if (!validateForm()) {
        alert("Please fill all required fields correctly.");
        return;
      }
      const data = gatherFormData();
      if (editingInvoiceId) {
        const idx = invoices.findIndex(i => i.id === editingInvoiceId);
        if (idx !== -1) {
          invoices[idx] = { ...invoices[idx], ...data, id: editingInvoiceId };
        }
      } else {
        invoices.push({ ...data, id: generateId() });
      }
      saveInvoices();
      closeForm();
    });
    searchInput.addEventListener("input", () => {
      renderInvoices(searchInput.value);
    });
    printToggleBtn.addEventListener("click", () => {
      printViewActive = !printViewActive;
      printToggleBtn.setAttribute("aria-pressed", printViewActive.toString());
      if (printViewActive) {
        invoiceList.hidden = true;
        formSection.hidden = true;
        emptyState.hidden = true;
        addInvoiceBtn.disabled = true;
        searchInput.disabled = true;
        printToggleBtn.textContent = "Close Print View";
      } else {
        invoiceList.hidden = false;
        addInvoiceBtn.disabled = false;
        searchInput.disabled = false;
        printToggleBtn.textContent = "Print View";
        renderInvoices(searchInput.value);
      }
      renderPrintView(invoices.filter(inv => {
        const f = searchInput.value.trim().toLowerCase();
        if (!f) return true;
        return inv.clientName.toLowerCase().includes(f) || inv.status.toLowerCase().includes(f);
      }));
    });

    // Keyboard navigation for invoice list (focus management)
    invoiceList.addEventListener("keydown", e => {
      const focusable = Array.from(invoiceList.querySelectorAll(".invoice-card"));
      if (focusable.length === 0) return;
      const index = focusable.indexOf(document.activeElement);
      if (e.key === "ArrowDown") {
        e.preventDefault();
        const nextIndex = (index + 1) % focusable.length;
        focusable[nextIndex].focus();
      } else if (e.key === "ArrowUp") {
        e.preventDefault();
        const prevIndex = (index - 1 + focusable.length) % focusable.length;
        focusable[prevIndex].focus();
      }
    });

    // Initialization
    loadInvoices();
    renderInvoices();

    // Add one initial item row for new forms
    if (itemsTbody.children.length === 0) addItemRow();
  })();
</script>
</body>
</html>