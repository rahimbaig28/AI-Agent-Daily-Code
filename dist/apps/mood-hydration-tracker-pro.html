<!DOCTYPE html>
<html lang="en">
<head>
<!-- Auto-generated via Perplexity on 2026-01-01T04:46:46.588351Z -->

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width,initial-scale=1'>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mood & Hydration Tracker Pro</title>
    <style>
        :root {
            --bg-primary: #f8fafc;
            --bg-secondary: #e2e8f0;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --accent-blue: #3b82f6;
            --accent-green: #10b981;
            --mood-good: #10b981;
            --mood-neutral: #f59e0b;
            --mood-bad: #ef4444;
            --border: #e2e8f0;
            --shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            --radius: 12px;
        }
        [data-theme="dark"] {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --border: #334155;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background 0.3s, color 0.3s;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 1rem; }
        header { text-align: center; padding: 2rem 0; }
        .theme-toggle { position: absolute; top: 1rem; right: 1rem; background: none; border: 2px solid var(--border); border-radius: 50%; width: 48px; height: 48px; cursor: pointer; }
        main { display: grid; grid-template-columns: 1fr 400px; gap: 2rem; margin-top: 2rem; }
        @media (max-width: 768px) { main { grid-template-columns: 1fr; } }
        .form-section, .stats-section { background: var(--bg-secondary); border-radius: var(--radius); padding: 2rem; box-shadow: var(--shadow); }
        .form-grid { display: grid; gap: 1.5rem; }
        label { display: block; font-weight: 600; margin-bottom: 0.5rem; }
        input, select { width: 100%; padding: 0.75rem; border: 2px solid var(--border); border-radius: 8px; font-size: 1rem; transition: border-color 0.2s; }
        input:focus, select:focus { outline: none; border-color: var(--accent-blue); }
        .mood-selector { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; }
        .mood-btn { width: 60px; height: 60px; border: none; border-radius: 50%; font-size: 2rem; cursor: pointer; transition: all 0.2s; }
        .mood-happy { background: var(--mood-good); color: white; }
        .mood-neutral { background: var(--mood-neutral); color: white; }
        .mood-sad { background: var(--mood-bad); color: white; }
        .mood-btn:hover, .mood-btn.active { transform: scale(1.1); box-shadow: var(--shadow); }
        .slider-container { text-align: center; }
        .slider { width: 200px; height: 8px; border-radius: 4px; background: var(--border); outline: none; -webkit-appearance: none; }
        .slider::-webkit-slider-thumb { -webkit-appearance: none; width: 24px; height: 24px; border-radius: 50%; background: var(--accent-blue); cursor: pointer; }
        .log-list { max-height: 400px; overflow-y: auto; margin-top: 1rem; }
        .log-entry { display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--bg-primary); margin-bottom: 0.5rem; border-radius: 8px; border-left: 4px solid var(--mood-good); }
        .log-entry.neutral { border-left-color: var(--mood-neutral); }
        .log-entry.sad { border-left-color: var(--mood-bad); }
        .log-time { font-size: 0.875rem; color: var(--text-secondary); }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 2rem; }
        .stat-card { text-align: center; padding: 1.5rem; background: var(--bg-primary); border-radius: var(--radius); }
        .stat-number { font-size: 2.5rem; font-weight: bold; color: var(--accent-blue); }
        #chart { width: 100%; height: 300px; background: var(--bg-primary); border-radius: var(--radius); margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 600; transition: all 0.2s; }
        .btn-primary { background: var(--accent-blue); color: white; }
        .btn-secondary { background: var(--border); color: var(--text-primary); }
        .btn-danger { background: #ef4444; color: white; }
        .btn-group { display: flex; gap: 0.5rem; flex-wrap: wrap; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; }
        .modal[open] { display: flex; align-items: center; justify-content: center; }
        .modal-content { background: var(--bg-secondary); padding: 2rem; border-radius: var(--radius); max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto; }
        .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); border: 0; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 0.3s ease-out; }
    </style>
</head>
<body>
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark/light theme">üåô</button>
    
    <div class="container">
        <header>
            <h1>Mood & Hydration Tracker Pro</h1>
            <p>Track your daily mood and hydration for better wellness</p>
        </header>

        <main role="main">
            <section class="form-section" aria-labelledby="form-heading">
                <h2 id="form-heading">Add New Entry</h2>
                <form class="form-grid" id="trackerForm">
                    <div>
                        <label for="moodSelect">Mood</label>
                        <div class="mood-selector" role="radiogroup" aria-labelledby="mood-label">
                            <span id="mood-label" class="sr-only">Select mood:</span>
                            <button type="button" class="mood-btn mood-happy" data-mood="8" role="radio" aria-checked="false" aria-label="Happy üòä">üòä</button>
                            <button type="button" class="mood-btn mood-neutral" data-mood="5" role="radio" aria-checked="false" aria-label="Neutral üòê">üòê</button>
                            <button type="button" class="mood-btn mood-sad" data-mood="2" role="radio" aria-checked="false" aria-label="Sad üòû">üòû</button>
                        </div>
                        <div class="slider-container">
                            <label for="moodSlider">Custom mood (1-10)</label>
                            <input type="range" id="moodSlider" min="1" max="10" value="5" class="slider" aria-valuemin="1" aria-valuemax="10" aria-valuenow="5">
                            <span id="moodValue">5</span>
                        </div>
                    </div>
                    <div>
                        <label for="waterInput">Glasses of water (8oz each)</label>
                        <input type="number" id="waterInput" min="0" max="20" value="0" aria-label="Number of water glasses">
                    </div>
                    <div class="btn-group">
                        <button type="submit" class="btn btn-primary" aria-label="Add log entry">Add Entry</button>
                        <button type="button" class="btn btn-secondary" id="clearData" aria-label="Clear all data">Clear Data</button>
                    </div>
                </form>
                
                <div class="log-list" id="logList" aria-live="polite" role="log"></div>
            </section>

            <aside class="stats-section" aria-labelledby="stats-heading">
                <h2 id="stats-heading">Weekly Stats</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="avgMood">--</div>
                        <div>Avg Mood</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="avgWater">--</div>
                        <div>Avg Water</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="streak">0</div>
                        <div>Streak</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalDays">0</div>
                        <div>Total Days</div>
                    </div>
                </div>
                <canvas id="chart" aria-label="Mood and hydration trends chart"></canvas>
                <div class="btn-group">
                    <button class="btn btn-primary" id="exportBtn" aria-label="Export data as JSON">Export JSON</button>
                    <button class="btn btn-secondary" id="importBtn" aria-label="Import data from JSON">Import JSON</button>
                </div>
            </aside>
        </main>
    </div>

    <dialog class="modal" id="confirmModal" role="dialog" aria-labelledby="confirm-title">
        <div class="modal-content">
            <h3 id="confirm-title">Confirm Clear Data</h3>
            <p>Are you sure you want to delete all data? This cannot be undone.</p>
            <div class="btn-group">
                <button class="btn btn-danger" id="confirmClear">Clear All</button>
                <button class="btn btn-secondary" id="cancelClear">Cancel</button>
            </div>
        </div>
    </dialog>

    <script>
        class TrackerApp {
            constructor() {
                this.logs = [];
                this.actionStack = [];
                this.redoStack = [];
                this.autoSaveTimer = null;
                this.chartCtx = null;
                this.init();
            }

            init() {
                this.loadData();
                this.addSampleData();
                this.bindEvents();
                this.updateTheme();
                this.renderLogs();
                this.updateStats();
                this.renderChart();
                this.startAutoSave();
                this.updateLiveRegion('Tracker loaded successfully.');
            }

            bindEvents() {
                // Form submission
                document.getElementById('trackerForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.addLog();
                });

                // Mood buttons
                document.querySelectorAll('.mood-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => this.selectMood(e.target));
                    btn.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            this.selectMood(e.target);
                        }
                    });
                });

                // Mood slider
                const slider = document.getElementById('moodSlider');
                slider.addEventListener('input', (e) => {
                    document.getElementById('moodValue').textContent = e.target.value;
                });

                // Theme toggle
                document.getElementById('themeToggle').addEventListener('click', () => this.toggleTheme());

                // Data management
                document.getElementById('clearData').addEventListener('click', () => this.showClearConfirm());
                document.getElementById('exportBtn').addEventListener('click', () => this.exportData());
                document.getElementById('importBtn').addEventListener('click', () => this.importData());

                // Modal controls
                document.getElementById('confirmClear').addEventListener('click', () => this.clearAllData());
                document.getElementById('cancelClear').addEventListener('click', () => this.hideClearConfirm());

                // Keyboard shortcuts
                document.addEventListener('keydown', (e) => {
                    if (e.ctrlKey || e.metaKey) {
                        if (e.key === 'z') this.undo();
                        if (e.key === 'y') this.redo();
                    }
                    if (e.key === 'Escape') this.hideClearConfirm();
                });

                // Enter key on inputs
                document.getElementById('waterInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') document.getElementById('trackerForm').dispatchEvent(new Event('submit'));
                });
            }

            selectMood(btn) {
                document.querySelectorAll('.mood-btn').forEach(b => {
                    b.classList.remove('active');
                    b.setAttribute('aria-checked', 'false');
                });
                btn.classList.add('active');
                btn.setAttribute('aria-checked', 'true');
                document.getElementById('moodSlider').value = btn.dataset.mood;
                document.getElementById('moodValue').textContent = btn.dataset.mood;
            }

            addLog() {
                const mood = parseInt(document.getElementById('moodSlider').value);
                const water = parseInt(document.getElementById('waterInput').value) || 0;
                
                if (mood < 1 || mood > 10) return;

                const log = {
                    id: Date.now(),
                    date: new Date().toISOString().split('T')[0],
                    mood,
                    water,
                    timestamp: new Date().toLocaleString()
                };

                this.executeAction('add', log);
                document.getElementById('trackerForm').reset();
                document.getElementById('moodSlider').value = 5;
                document.getElementById('moodValue').textContent = '5';
                document.querySelector('.mood-btn[data-mood="5"]').focus();
            }

            executeAction(type, data) {
                const action = { type, data, timestamp: Date.now() };
                this.actionStack.push(action);
                if (this.actionStack.length > 10) this.actionStack.shift();
                this.redoStack = [];

                switch (type) {
                    case 'add':
                        this.logs.push(data);
                        this.renderLogs();
                        break;
                    case 'delete':
                        this.logs = this.logs.filter(log => log.id !== data.id);
                        this.renderLogs();
                        break;
                }

                this.updateStats();
                this.renderChart();
                this.saveData();
                this.updateLiveRegion(`${type === 'add' ? 'Entry added' : 'Entry deleted'}`);
            }

            undo() {
                if (this.actionStack.length === 0) return;
                const action = this.actionStack.pop();
                this.redoStack.push(action);
                // Simplified undo - just reload from saved state for demo
                this.loadData();
                this.renderLogs();
                this.updateStats();
                this.renderChart();
            }

            redo() {
                if (this.redoStack.length === 0) return;
                const action = this.redoStack.pop();
                this.actionStack.push(action);
                this.executeAction(action.type, action.data);
            }

            renderLogs() {
                const list = document.getElementById('logList');
                list.innerHTML = this.logs.slice(-10).reverse().map(log => {
                    const moodClass = log.mood >= 7 ? 'good' : log.mood >= 4 ? 'neutral' : 'sad';
                    return `
                        <div class="log-entry ${moodClass}" role="log" aria-label="Mood ${log.mood}, ${log.water} glasses water">
                            <div>
                                <div><strong>${log.mood}/10</strong> ‚Ä¢ ${log.water} glasses</div>
                                <div class="log-time">${log.timestamp}</div>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            updateStats() {
                const weeklyLogs = this.getWeeklyLogs();
                const avgMood = weeklyLogs.length ? (weeklyLogs.reduce((sum, log) => sum + log.mood, 0) / weeklyLogs.length).toFixed(1) : 0;
                const avgWater = weeklyLogs.length ? (weeklyLogs.reduce((sum, log) => sum + log.water, 0) / weeklyLogs.length).toFixed(1) : 0;
                const streak = this.calculateStreak();
                const totalDays = this.logs.length;

                document.getElementById('avgMood').textContent = avgMood;
                document.getElementById('avgWater').textContent = avgWater;
                document.getElementById('streak').textContent = streak;
                document.getElementById('totalDays').textContent = totalDays;
            }

            getWeeklyLogs() {
                const oneWeekAgo = new Date();
                oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);
                return this.logs.filter(log => new Date(log.date) >= oneWeekAgo);
            }

            calculateStreak() {
                const today = new Date().toISOString().split('T')[0];
                let streak = 0;
                const sortedLogs = [...this.logs].sort((a, b) => new Date(b.date) - new Date(a.date));
                
                for (let log of sortedLogs) {
                    if (log.date === today) {
                        streak++;
                        break;
                    }
                }
                return streak;
            }

            renderChart() {
                const canvas = document.getElementById('chart');
                const ctx = canvas.getContext('2d');
                this.chartCtx = ctx;
                
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;

                const weeklyData = this.getWeeklyLogs().sort((a, b) => new Date(a.date) - new Date(b.date));
                if (weeklyData.length === 0) return;

                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                const padding = 40;
                const chartWidth = canvas.width - padding * 2;
                const chartHeight = canvas.height - padding * 2;
                
                // Grid
                ctx.strokeStyle = 'rgba(0,0,0,0.1)';
                ctx.lineWidth = 1;
                for (let i = 0; i <= 5; i++) {
                    const y = padding + (chartHeight * i / 5);
                    ctx.beginPath();
                    ctx.moveTo(padding, y);
                    ctx.lineTo(canvas.width - padding, y);
                    ctx.stroke();
                }

                // Mood line (scale 1-10 to chart height)
                ctx.strokeStyle = '#3b82f6';
                ctx.lineWidth = 3;
                ctx.lineJoin = 'round';
                ctx.lineCap = 'round';
                ctx.beginPath();
                weeklyData.forEach((log, i) => {
                    const x = padding + (chartWidth * i / (weeklyData.length - 1));
                    const y = padding + chartHeight - (log.mood / 10 * chartHeight);
                    if (i === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                });
                ctx.stroke();

                // Water bars
                ctx.fillStyle = '#10b981';
                weeklyData.forEach((log, i) => {
                    const x = padding + (chartWidth * i / (weeklyData.length - 1));
                    const barHeight = (log.water / 10) * (chartHeight * 0.6); // Max 10 glasses
                    const barWidth = chartWidth / weeklyData.length * 0.6;
                    ctx.fillRect(x - barWidth/2, canvas.height - padding - barHeight, barWidth, barHeight);
                });

                requestAnimationFrame(() => this.renderChart()); // 60fps updates
            }

            toggleTheme() {
                const current = document.documentElement.getAttribute('data-theme');
                const next = current === 'dark' ? 'light' : 'dark';
                document.documentElement.setAttribute('data-theme', next);
                localStorage.setItem('theme', next);
            }

            updateTheme() {
                const saved = localStorage.getItem('theme');
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                const theme = saved || (prefersDark ? 'dark' : 'light');
                document.documentElement.setAttribute('data-theme', theme);
                document.getElementById('themeToggle').textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
            }

            saveData() {
                localStorage.setItem('tracker-logs', JSON.stringify(this.logs));
                localStorage.setItem('tracker-actions', JSON.stringify({ actionStack: this.actionStack, redoStack: this.redoStack }));
            }

            loadData() {
                const savedLogs = localStorage.getItem('tracker-logs');
                if (savedLogs) this.logs = JSON.parse(savedLogs);
            }

            addSampleData() {
                if (this.logs.length === 0) {
                    const sampleDates = [];
                    for (let i = 6; i >= 0; i--) {
                        const date = new Date();
                        date.setDate(date.getDate() - i);
                        sampleDates.push(date.toISOString().split('T')[0]);
                    }
                    this.logs = sampleDates.map((date, i) => ({
                        id: Date.now() + i,
                        date,
                        mood: Math.floor(Math.random() * 10) + 1,
                        water: Math.floor(Math.random() * 8) + 2,
                        timestamp: new Date(date + 'T12:00:00').toLocaleString()
                    }));
                    this.saveData();
                }
            }

            startAutoSave() {
                this.autoSaveTimer = setInterval(() => this.saveData(), 30000);
            }

            exportData() {
                const data = { logs: this.logs, theme: localStorage.getItem('theme') };
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `mood-hydration-${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                URL.revokeObjectURL(url);
            }

            importData() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';
                input.onchange = (e) => {
                    const file = e.target.files[0];
                    if (!file) return;
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        try {
                            const data = JSON.parse(e.target.result);
                            if (data.logs) {
                                this.logs = data.logs;
                                this.saveData();
                                this.renderLogs();
                                this.updateStats();
                                this.renderChart();
                                this.updateLiveRegion('Data imported successfully');
                            }
                        } catch (err) {
                            this.updateLiveRegion('Invalid JSON file');
                        }
                    };
                    reader.readAsText(file);
                };
                input.click();
            }

            clearAllData() {
                this.logs = [];
                localStorage.removeItem('tracker-logs');
                localStorage.removeItem('tracker-actions');
                this.actionStack = [];
                this.redoStack = [];
                this.renderLogs();
                this.updateStats();
                this.renderChart();
                this.hideClearConfirm();
                this.updateLiveRegion('All data cleared');
            }

            showClearConfirm() {
                document.getElementById('confirmModal').showModal();
                document.getElementById('confirmModal').focus();
            }

            hideClearConfirm() {
                document.getElementById('confirmModal').close();
            }

            updateLiveRegion(message) {
                const liveRegion = document.getElementById('logList');
                liveRegion.setAttribute('aria-live', 'polite');
                // Screen reader will pick up log changes naturally
            }
        }

        // Initialize app when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => new TrackerApp());
    </script>
</body>
</html>