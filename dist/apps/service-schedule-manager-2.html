<!DOCTYPE html>
<html lang="en">
<head>
<!-- Auto-generated via Perplexity on 2026-02-13T13:36:07.002877Z -->

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width,initial-scale=1'>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Schedule Manager</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f5f5; color: #333; line-height: 1.4; }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .header { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px; display: flex; flex-wrap: wrap; gap: 20px; align-items: center; }
        .status { font-weight: 600; font-size: 1.1em; }
        .undo-redo { display: flex; gap: 10px; }
        .btn { padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: 600; min-height: 44px; min-width: 44px; transition: all 0.2s; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn-primary { background: #007bff; color: white; }
        .btn-secondary { background: #6c757d; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn-danger { background: #dc3545; color: white; }
        .search { flex: 1; min-width: 200px; }
        .search input { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; }
        .add-form { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
        .form-group { display: flex; flex-direction: column; }
        .form-group label { font-weight: 600; margin-bottom: 5px; }
        .form-group input, .form-group select, .form-group textarea { padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; min-height: 44px; }
        .calendar { background: white; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); overflow: hidden; }
        .calendar-header { display: grid; grid-template-columns: 80px repeat(7, 1fr); background: #f8f9fa; font-weight: 600; padding: 15px; }
        .day-header { text-align: center; padding: 10px; }
        .time-col { background: #e9ecef; font-weight: 600; writing-mode: vertical-rl; text-orientation: mixed; text-align: center; padding: 10px 5px; position: sticky; left: 0; z-index: 2; }
        .calendar-grid { display: grid; grid-template-columns: 80px repeat(7, 1fr); height: 600px; overflow: auto; }
        .time-slot { border-right: 1px solid #dee2e6; border-bottom: 1px solid #dee2e6; min-height: 60px; padding: 8px; position: relative; display: flex; flex-direction: column; gap: 4px; cursor: pointer; transition: background 0.2s; }
        .time-slot:hover { background: #f8f9fa; }
        .time-slot.selected { background: #e3f2fd; outline: 2px solid #2196f3; }
        .service { padding: 8px 12px; border-radius: 6px; color: white; font-size: 14px; font-weight: 500; cursor: move; user-select: none; min-height: 32px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 1px 3px rgba(0,0,0,0.2); position: relative; }
        .service.plumbing { background: #2196f3; }
        .service.electrical { background: #ff9800; }
        .service.cleaning { background: #4caf50; }
        .service.other { background: #9e9e9e; }
        .service-controls { display: flex; gap: 4px; opacity: 0; transition: opacity 0.2s; }
        .service:hover .service-controls { opacity: 1; }
        .service-controls button { background: rgba(255,255,255,0.3); border: none; border-radius: 4px; width: 24px; height: 24px; cursor: pointer; color: white; font-size: 12px; }
        @media (max-width: 768px) { .calendar-grid { grid-template-columns: 1fr; } .calendar-header { grid-template-columns: 1fr; } .time-col { writing-mode: horizontal-tb; grid-column: 1; } .day-header { display: none; } .add-form { grid-template-columns: 1fr; } .header { flex-direction: column; align-items: stretch; } }
        .hidden { display: none; }
        .drag-over { background: #e3f2fd !important; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="status" id="status">0 services this week | Next available: Mon 8:00 AM</div>
            <div class="undo-redo">
                <button class="btn btn-secondary" id="undoBtn" disabled>‚Ü∂ Undo</button>
                <button class="btn btn-secondary" id="redoBtn" disabled>‚Ü∑ Redo</button>
            </div>
            <div class="search">
                <input type="text" id="searchInput" placeholder="Search by client name or phone...">
            </div>
            <button class="btn btn-success" id="exportBtn">Export Week</button>
        </div>
        <div class="add-form" id="addForm">
            <div class="form-group">
                <label for="clientName">Client Name</label>
                <input type="text" id="clientName" required>
            </div>
            <div class="form-group">
                <label for="clientPhone">Phone</label>
                <input type="tel" id="clientPhone" required>
            </div>
            <div class="form-group">
                <label for="serviceType">Service Type</label>
                <select id="serviceType" required>
                    <option value="plumbing">Plumbing</option>
                    <option value="electrical">Electrical</option>
                    <option value="cleaning">Cleaning</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div class="form-group">
                <label for="serviceDate">Date</label>
                <input type="date" id="serviceDate">
            </div>
            <div class="form-group">
                <label for="serviceTime">Time</label>
                <input type="time" id="serviceTime" step="900">
            </div>
            <div class="form-group">
                <label for="duration">Duration</label>
                <select id="duration">
                    <option value="0.5">30 min</option>
                    <option value="1">1 hour</option>
                    <option value="1.5">1.5 hours</option>
                    <option value="2">2 hours</option>
                    <option value="3">3 hours</option>
                    <option value="4">4 hours</option>
                </select>
            </div>
            <div class="form-group">
                <label for="notes">Notes</label>
                <textarea id="notes" rows="2"></textarea>
            </div>
            <div class="form-group" style="grid-column: 1 / -1; display: flex; gap: 10px;">
                <button class="btn btn-primary" id="addBtn" style="flex: 1;">Add Service</button>
                <button class="btn btn-secondary" id="cancelEditBtn" style="display: none;">Cancel Edit</button>
            </div>
        </div>
        <div class="calendar">
            <div class="calendar-header" id="calendarHeader"></div>
            <div class="calendar-grid" id="calendarGrid"></div>
        </div>
    </div>

    <script>
        class ServiceScheduleManager {
            constructor() {
                this.services = [];
                this.filteredServices = [];
                this.history = [];
                this.historyIndex = -1;
                this.selectedService = null;
                this.draggedService = null;
                this.currentWeekStart = this.getMonday(new Date('2026-02-13'));
                this.timeSlots = [];
                this.init();
            }

            init() {
                this.loadServices();
                this.generateTimeSlots();
                this.renderCalendarHeader();
                this.renderCalendar();
                this.bindEvents();
                this.updateStatus();
                this.saveState();
            }

            getMonday(date) {
                const d = new Date(date);
                const day = d.getDay();
                const diff = d.getDay() === 0 ? -6 : day - 1;
                d.setDate(d.getDate() - diff);
                d.setHours(0, 0, 0, 0);
                return d;
            }

            generateTimeSlots() {
                this.timeSlots = [];
                for (let hour = 8; hour <= 18; hour++) {
                    for (let min = 0; min < 60; min += 30) {
                        this.timeSlots.push(`${hour.toString().padStart(2, '0')}:${min.toString().padStart(2, '0')}`);
                    }
                }
            }

            renderCalendarHeader() {
                const header = document.getElementById('calendarHeader');
                let html = '<div class="time-col"></div>';
                const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
                days.forEach(day => {
                    const date = new Date(this.currentWeekStart);
                    date.setDate(date.getDate() + days.indexOf(day));
                    html += `<div class="day-header">${day}<br>${date.getDate()}/${date.getMonth() + 1}</div>`;
                });
                header.innerHTML = html;
            }

            renderCalendar() {
                const grid = document.getElementById('calendarGrid');
                let html = '';
                
                // Time column
                html += '<div class="time-col"></div>';
                this.timeSlots.forEach(time => {
                    html += `<div class="time-slot time-label" data-time="${time}" tabindex="-1">${time}</div>`;
                });
                
                // Day columns
                for (let day = 0; day < 7; day++) {
                    html += '<div class="day-col"></div>';
                    this.timeSlots.forEach(time => {
                        const slotId = `${day}-${time}`;
                        html += `<div class="time-slot" data-slot="${slotId}" tabindex="0"></div>`;
                    });
                }
                
                grid.innerHTML = html;
                this.renderServices();
                this.bindCalendarEvents();
            }

            renderServices(filter = '') {
                this.filteredServices = this.services.filter(s => 
                    s.clientName.toLowerCase().includes(filter.toLowerCase()) ||
                    s.clientPhone.includes(filter)
                );
                
                document.querySelectorAll('.time-slot:not(.time-label)').forEach(slot => {
                    slot.innerHTML = '';
                    slot.classList.remove('drag-over', 'selected');
                });

                this.filteredServices.forEach(service => {
                    const slotEl = document.querySelector(`[data-slot="${service.slot}"]`);
                    if (slotEl) {
                        const serviceEl = document.createElement('div');
                        serviceEl.className = `service ${service.type}`;
                        serviceEl.dataset.id = service.id;
                        serviceEl.draggable = true;
                        serviceEl.innerHTML = `
                            <div>${service.clientName}<br><small>${service.type.toUpperCase()}</small></div>
                            <div class="service-controls">
                                <button aria-label="Edit">‚úèÔ∏è</button>
                                <button aria-label="Delete">üóëÔ∏è</button>
                            </div>
                        `;
                        slotEl.appendChild(serviceEl);
                    }
                });

                this.updateStatus();
            }

            bindEvents() {
                // Form events
                document.getElementById('addBtn').addEventListener('click', () => this.addOrUpdateService());
                document.getElementById('cancelEditBtn').addEventListener('click', () => this.resetForm());
                document.getElementById('searchInput').addEventListener('input', (e) => this.renderServices(e.target.value));
                document.getElementById('exportBtn').addEventListener('click', () => this.exportWeek());
                
                // Undo/Redo
                document.getElementById('undoBtn').addEventListener('click', () => this.undo());
                document.getElementById('redoBtn').addEventListener('click', () => this.redo());
                
                // Keyboard shortcuts
                document.addEventListener('keydown', (e) => {
                    if (e.ctrlKey && e.key === 'z') { e.preventDefault(); this.undo(); }
                    if (e.ctrlKey && e.key === 'y') { e.preventDefault(); this.redo(); }
                    if (e.key === 'Delete' && this.selectedService) { this.deleteService(this.selectedService.dataset.id); }
                    if (e.key === 'Enter' && document.activeElement.closest('#addForm')) { this.addOrUpdateService(); }
                });

                // Form date default to today
                const today = new Date('2026-02-13');
                document.getElementById('serviceDate').value = today.toISOString().split('T')[0];
                document.getElementById('serviceTime').value = '13:00';
            }

            bindCalendarEvents() {
                // Drag and drop
                document.querySelectorAll('.service').forEach(service => {
                    service.addEventListener('dragstart', (e) => {
                        this.draggedService = service;
                        e.dataTransfer.effectAllowed = 'move';
                    });
                });

                document.querySelectorAll('.time-slot:not(.time-label)').forEach(slot => {
                    slot.addEventListener('dragover', (e) => {
                        e.preventDefault();
                        e.dataTransfer.dropEffect = 'move';
                        slot.classList.add('drag-over');
                    });

                    slot.addEventListener('dragleave', () => slot.classList.remove('drag-over'));

                    slot.addEventListener('drop', (e) => {
                        e.preventDefault();
                        slot.classList.remove('drag-over');
                        if (this.draggedService) {
                            const serviceId = this.draggedService.dataset.id;
                            const newSlot = slot.dataset.slot;
                            this.moveService(serviceId, newSlot);
                        }
                    });

                    // Click to select/edit
                    slot.addEventListener('click', (e) => {
                        if (e.target.closest('.service')) return;
                        document.querySelectorAll('.time-slot').forEach(s => s.classList.remove('selected'));
                        slot.classList.add('selected');
                    });

                    // Service controls
                    slot.addEventListener('click', (e) => {
                        const service = e.target.closest('.service');
                        if (!service) return;

                        if (e.target.closest('.service-controls button')) {
                            if (e.target.textContent === 'üóëÔ∏è') {
                                this.deleteService(service.dataset.id);
                            }
                            return;
                        }

                        // Select for edit
                        this.selectedService = service;
                        this.editService(service.dataset.id);
                    });
                });
            }

            addOrUpdateService() {
                const service = {
                    id: this.selectedService ? this.selectedService.dataset.id : Date.now().toString(),
                    clientName: document.getElementById('clientName').value,
                    clientPhone: document.getElementById('clientPhone').value,
                    type: document.getElementById('serviceType').value,
                    date: document.getElementById('serviceDate').value,
                    time: document.getElementById('serviceTime').value,
                    duration: parseFloat(document.getElementById('duration').value),
                    notes: document.getElementById('notes').value,
                    slot: ''
                };

                // Calculate slot
                const dayIndex = new Date(service.date).getDay() === 0 ? 6 : new Date(service.date).getDay() - 1;
                service.slot = `${dayIndex}-${service.time}`;

                if (this.validateService(service)) {
                    this.saveState();
                    const oldServices = [...this.services];
                    if (this.selectedService) {
                        const index = this.services.findIndex(s => s.id === service.id);
                        this.services[index] = service;
                    } else {
                        this.services.push(service);
                    }
                    this.renderCalendar();
                    this.resetForm();
                    this.selectedService = null;
                }
            }

            validateService(service) {
                if (!service.clientName || !service.clientPhone || !service.date || !service.time) {
                    alert('Please fill all required fields');
                    return false;
                }
                return true;
            }

            editService(id) {
                const service = this.services.find(s => s.id === id);
                if (service) {
                    document.getElementById('clientName').value = service.clientName;
                    document.getElementById('clientPhone').value = service.clientPhone;
                    document.getElementById('serviceType').value = service.type;
                    document.getElementById('serviceDate').value = service.date;
                    document.getElementById('serviceTime').value = service.time;
                    document.getElementById('duration').value = service.duration;
                    document.getElementById('notes').value = service.notes;
                    document.getElementById('addBtn').textContent = 'Update Service';
                    document.getElementById('cancelEditBtn').style.display = 'block';
                }
            }

            resetForm() {
                document.getElementById('addForm').reset();
                const today = new Date('2026-02-13');
                document.getElementById('serviceDate').value = today.toISOString().split('T')[0];
                document.getElementById('serviceTime').value = '13:00';
                document.getElementById('addBtn').textContent = 'Add Service';
                document.getElementById('cancelEditBtn').style.display = 'none';
                this.selectedService = null;
            }

            deleteService(id) {
                if (confirm('Delete this service?')) {
                    this.saveState();
                    this.services = this.services.filter(s => s.id !== id);
                    this.renderCalendar();
                }
            }

            moveService(id, newSlot) {
                const service = this.services.find(s => s.id === id);
                if (service) {
                    this.saveState();
                    service.slot = newSlot;
                    service.time = newSlot.split('-')[1];
                    this.renderCalendar();
                }
            }

            saveState() {
                if (this.historyIndex < this.history.length - 1) {
                    this.history = this.history.slice(0, this.historyIndex + 1);
                }
                this.history.push(JSON.parse(JSON.stringify(this.services)));
                if (this.history.length > 20) {
                    this.history.shift();
                }
                this.historyIndex = this.history.length - 1;
                this.updateUndoRedoButtons();
            }

            undo() {
                if (this.historyIndex > 0) {
                    this.historyIndex--;
                    this.services = JSON.parse(JSON.stringify(this.history[this.historyIndex]));
                    this.renderCalendar();
                    this.updateUndoRedoButtons();
                }
            }

            redo() {
                if (this.historyIndex < this.history.length - 1) {
                    this.historyIndex++;
                    this.services = JSON.parse(JSON.stringify(this.history[this.historyIndex]));
                    this.renderCalendar();
                    this.updateUndoRedoButtons();
                }
            }

            updateUndoRedoButtons() {
                document.getElementById('undoBtn').disabled = this.historyIndex <= 0;
                document.getElementById('redoBtn').disabled = this.historyIndex >= this.history.length - 1;
            }

            updateStatus() {
                const count = this.services.length;
                const nextSlot = this.findNextAvailableSlot();
                document.getElementById('status').textContent = 
                    `${count} services this week | Next available: ${nextSlot}`;
            }

            findNextAvailableSlot() {
                const today = new Date('2026-02-13');
                const dayIndex = today.getDay() === 0 ? 6 : today.getDay() - 1;
                for (let i = dayIndex; i < 7; i++) {
                    for (let time of this.timeSlots) {
                        const slot = `${i}-${time}`;
                        if (!this.services.some(s => s.slot === slot)) {
                            const [hour, min] = time.split(':');
                            const date = new Date(this.currentWeekStart);
                            date.setDate(date.getDate() + i);
                            return `${date.toLocaleDateString('en-US', {weekday: 'short'})} ${time}`;
                        }
                    }
                }
                return 'No slots available';
            }

            exportWeek() {
                let output = 'Service Schedule Export\n' + '='.repeat(50) + '\n\n';
                const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
                days.forEach((day, dayIndex) => {
                    output += `${day}:\n`;
                    const dayServices = this.filteredServices.filter(s => s.slot.startsWith(dayIndex.toString()));
                    dayServices.forEach(s => {
                        output += `  ${s.time} - ${s.clientName} (${s.clientPhone}) - ${s.type.toUpperCase()}\n`;
                        if (s.notes) output += `    Notes: ${s.notes}\n`;
                    });
                    output += '\n';
                });
                const blob = new Blob([output], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `service-schedule-${this.currentWeekStart.toISOString().split('T')[0]}.txt`;
                a.click();
                URL.revokeObjectURL(url);
            }

            loadServices() {
                const saved = localStorage.getItem('serviceSchedule');
                if (saved) {
                    this.services = JSON.parse(saved);
                }
            }

            saveServices() {
                localStorage.setItem('serviceSchedule', JSON.stringify(this.services));
            }
        }

        // Initialize app
        new ServiceScheduleManager();

        // Auto-save every 30 seconds
        setInterval(() => {
            if (window.serviceManager) {
                window.serviceManager.saveServices();
            }
        }, 30000);
    </script>
</body>
</html>