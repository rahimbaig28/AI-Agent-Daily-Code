<!DOCTYPE html>
<html>
<head>
<!-- Auto-generated via Perplexity on 2025-12-22T01:41:47.810340Z -->

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width,initial-scale=1'>

<title>Literature Notes</title>
<style>
body {font-family:serif; max-width:800px; margin:40px auto; line-height:1.6;}
.note {margin:2em 0; padding:1.5em; border-left:4px solid #ccc; background:#fafafa;}
.note h2 {margin-top:0; color:#333;}
.note .meta {color:#666; font-size:0.9em; margin-bottom:1em;}
.note .tags {background:#e3f2fd; padding:0.3em 0.6em; border-radius:12px; font-size:0.85em;}
.note .tags span {margin-right:0.5em;}
.note .content {white-space:pre-wrap;}
.menu {position:fixed; top:20px; right:20px; background:#fff; padding:1em; border:1px solid #ccc; border-radius:8px; box-shadow:0 2px 10px rgba(0,0,0,0.1);}
button {display:block; width:120px; margin:0.3em 0; padding:0.5em; background:#007cba; color:white; border:none; border-radius:4px; cursor:pointer;}
button:hover {background:#005a87;}
#notes-container {margin-top:60px;}
@media print {body {margin:0; font-size:11pt;} .note {break-inside:avoid; page-break-inside:avoid;} .menu {display:none;}}
</style>
</head>
<body>
<div class="menu">
<button onclick="showMenu()">Menu</button>
<div id="menu-options" style="display:none;">
<button onclick="newNote()">New Note</button>
<button onclick="listNotes()">List Notes</button>
<button onclick="editNote()">Edit Note</button>
<button onclick="deleteNote()">Delete Note</button>
<button onclick="searchTags()">Search Tags</button>
<button onclick="exportPrint()">Print/Export</button>
<button onclick="clearAll()">Clear All</button>
</div>
</div>

<div id="output"></div>
<div id="notes-container"></div>

<script>
let notes = JSON.parse(localStorage.getItem('litnotes') || '[]');

function saveNotes() {
    localStorage.setItem('litnotes', JSON.stringify(notes));
}

function showMenu() {
    const menu = document.getElementById('menu-options');
    menu.style.display = menu.style.display === 'none' ? 'block' : 'none';
}

function output(text) {
    document.getElementById('output').innerHTML = text.replace(/\n/g, '<br>');
}

function renderNotes(notesToShow = notes, title = 'Notes (newest first):') {
    let html = `<h2>${title}</h2>`;
    if (!notesToShow.length) {
        html += '<p>No notes.</p>';
    } else {
        notesToShow.forEach((note, i) => {
            const tags = note.tags.length ? note.tags.join(', ') : 'none';
            html += `
            <div class="note" id="${note.id}">
                <h3>${note.title}</h3>
                <div class="meta">ID: ${note.id} | ${new Date(note.modified).toLocaleString()}</div>
                <div class="tags">${tags}</div>
                <div class="content">${note.content.replace(/\n/g, '<br>')}</div>
                <button onclick="editNote(${i})">Edit</button>
                <button onclick="deleteNote(${i})">Delete</button>
            </div>`;
        });
    }
    document.getElementById('notes-container').innerHTML = html;
}

function listNotes() {
    renderNotes(notes.sort((a,b) => new Date(b.modified) - new Date(a.modified)));
}

function newNote() {
    const title = prompt('Title:');
    if (!title) return;
    
    let content = prompt('Content (multi-line not supported in browser, single line):');
    const tags = prompt('Tags (comma-separated):', '').split(',').map(t => t.trim()).filter(t => t);
    
    const note = {
        id: `note_${notes.length + 1}`.padStart(10, '0'),
        title: title.trim(),
        content: content || '',
        tags,
        created: new Date().toISOString(),
        modified: new Date().toISOString()
    };
    
    notes.unshift(note);
    saveNotes();
    listNotes();
    output(`Created note '${title}' [${note.id}]`);
}

function findNoteByIndex(idx) {
    return notes[Math.max(0, Math.min(notes.length - 1, idx))];
}

function editNote(idx = -1) {
    const note = idx >= 0 ? notes[idx] : promptNoteSelection();
    if (!note) return;
    
    const newTitle = prompt(`Title [${note.title}]:`, note.title);
    const newContent = prompt(`Content [${note.content.substring(0, 50)}...]:`, note.content);
    const newTags = prompt(`Tags [${note.tags.join(', ')}]:`, note.tags.join(', '));
    
    if (newTitle !== null) note.title = newTitle.trim() || note.title;
    if (newContent !== null) note.content = newContent || note.content;
    if (newTags !== null) note.tags = newTags.split(',').map(t => t.trim()).filter(t => t);
    
    note.modified = new Date().toISOString();
    saveNotes();
    listNotes();
    output('Note updated.');
}

function deleteNote(idx = -1) {
    const note = idx >= 0 ? notes[idx] : promptNoteSelection();
    if (!note || !confirm(`Delete '${note.title.substring(0, 30)}...' ?`)) return;
    
    notes = notes.filter(n => n !== note);
    saveNotes();
    listNotes();
    output('Note deleted.');
}

function promptNoteSelection() {
    listNotes();
    const idx = parseInt(prompt('Select note number:'));
    return isNaN(idx) || idx < 1 || idx > notes.length ? null : notes[idx - 1];
}

function searchTags() {
    const tagsInput = prompt('Search tags (comma-separated):');
    if (!tagsInput) return;
    
    const searchTags = tagsInput.toLowerCase().split(',').map(t => t.trim());
    const matches = notes.filter(note => 
        note.tags.some(tag => searchTags.some(st => tag.toLowerCase().includes(st)))
    );
    renderNotes(matches, `Search results for: ${tagsInput}`);
}

function exportPrint() {
    window.print();
}

function clearAll() {
    if (confirm('Clear all notes? This cannot be undone.')) {
        notes = [];
        saveNotes();
        listNotes();
        output('All notes cleared.');
    }
}

// Initialize
listNotes();
</script>
</body>
</html>