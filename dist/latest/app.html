<!DOCTYPE html>
<html lang="en">
<head>
<!-- Auto-generated via Perplexity on 2026-01-19T07:43:04.125698Z -->

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width,initial-scale=1'>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carbon Footprint Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f5f5f5;
            --text-primary: #1a1a1a;
            --text-secondary: #666666;
            --border-color: #e0e0e0;
            --accent-color: #2ecc71;
            --accent-hover: #27ae60;
            --danger-color: #e74c3c;
            --card-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg-primary: #1a1a1a;
                --bg-secondary: #2d2d2d;
                --text-primary: #ffffff;
                --text-secondary: #b0b0b0;
                --border-color: #404040;
                --card-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            }
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: background-color 0.3s, color 0.3s;
            padding: 16px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            flex-wrap: wrap;
            gap: 16px;
        }

        h1 {
            font-size: 28px;
            font-weight: 600;
        }

        .theme-toggle {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 18px;
            transition: background-color 0.3s;
        }

        .theme-toggle:hover {
            background-color: var(--accent-color);
        }

        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }

        .card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--card-shadow);
        }

        .card-label {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .card-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--accent-color);
            margin-bottom: 8px;
        }

        .card-trend {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .trend-up {
            color: var(--danger-color);
        }

        .trend-down {
            color: var(--accent-color);
        }

        .form-section {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
            box-shadow: var(--card-shadow);
        }

        .form-section h2 {
            font-size: 18px;
            margin-bottom: 16px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 6px;
            color: var(--text-primary);
        }

        input, select, textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 14px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(46, 204, 113, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 60px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        @media (max-width: 600px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        button {
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: var(--accent-hover);
        }

        button:active {
            transform: scale(0.98);
        }

        .button-group {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .button-secondary {
            background: var(--bg-primary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .button-secondary:hover {
            background-color: var(--bg-secondary);
        }

        .activities-section {
            margin-bottom: 32px;
        }

        .activities-section h2 {
            font-size: 18px;
            margin-bottom: 16px;
        }

        .activity-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .activity-item {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: grab;
            transition: box-shadow 0.2s, transform 0.2s;
            user-select: none;
        }

        .activity-item:active {
            cursor: grabbing;
            opacity: 0.7;
        }

        .activity-item.dragging {
            opacity: 0.5;
            transform: scale(0.98);
        }

        .activity-icon {
            font-size: 24px;
            min-width: 32px;
            text-align: center;
        }

        .activity-content {
            flex: 1;
            min-width: 0;
        }

        .activity-date {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .activity-description {
            font-size: 14px;
            font-weight: 500;
            word-break: break-word;
        }

        .activity-co2 {
            font-size: 16px;
            font-weight: 700;
            color: var(--accent-color);
            min-width: 80px;
            text-align: right;
        }

        .activity-delete {
            background: var(--danger-color);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 6px 10px;
            font-size: 12px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .activity-delete:hover {
            background-color: #c0392b;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-secondary);
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }

        .goal-section {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 32px;
            box-shadow: var(--card-shadow);
        }

        .goal-section h3 {
            font-size: 16px;
            margin-bottom: 12px;
        }

        .goal-input-group {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
        }

        .goal-input-group input {
            flex: 1;
        }

        .goal-input-group button {
            padding: 10px 16px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--border-color);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 12px;
        }

        .progress-fill {
            height: 100%;
            background: var(--accent-color);
            transition: width 0.3s;
        }

        .progress-text {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 8px;
        }

        .export-section {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 32px;
            box-shadow: var(--card-shadow);
        }

        .export-section h3 {
            font-size: 16px;
            margin-bottom: 12px;
        }

        .export-button {
            width: 100%;
        }

        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--accent-color);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            animation: slideIn 0.3s ease-out;
            z-index: 1000;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 24px;
            }

            .summary-cards {
                grid-template-columns: 1fr;
            }

            .activity-item {
                flex-wrap: wrap;
            }

            .activity-co2 {
                width: 100%;
                text-align: left;
                margin-top: 8px;
            }

            .activity-delete {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üåç Carbon Footprint Tracker</h1>
            <button class="theme-toggle" aria-label="Toggle dark/light theme" title="Toggle theme">üåô</button>
        </header>

        <div class="summary-cards">
            <div class="card">
                <div class="card-label">This Week</div>
                <div class="card-value" id="weeklyTotal">0.0</div>
                <div class="card-label">kg CO‚ÇÇ</div>
                <div class="card-trend" id="weeklyTrend"></div>
            </div>
            <div class="card">
                <div class="card-label">This Month</div>
                <div class="card-value" id="monthlyTotal">0.0</div>
                <div class="card-label">kg CO‚ÇÇ</div>
            </div>
            <div class="card">
                <div class="card-label">All-Time</div>
                <div class="card-value" id="lifetimeTotal">0.0</div>
                <div class="card-label">kg CO‚ÇÇ</div>
            </div>
        </div>

        <div class="form-section">
            <h2>Log Activity</h2>
            <form id="activityForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="category">Category</label>
                        <select id="category" required aria-label="Activity category">
                            <option value="">Select a category</option>
                            <option value="Car">üöó Car</option>
                            <option value="Bus">üöå Bus</option>
                            <option value="Flight">‚úàÔ∏è Flight</option>
                            <option value="Electricity">‚ö° Electricity</option>
                            <option value="Food">üçΩÔ∏è Food</option>
                            <option value="Shopping">üõçÔ∏è Shopping</option>
                            <option value="Other">üìå Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="co2">CO‚ÇÇ Estimate (kg)</label>
                        <input type="number" id="co2" step="0.01" min="0" required aria-label="CO2 estimate in kilograms" placeholder="0.00">
                    </div>
                </div>
                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea id="description" placeholder="e.g., Commute to work, 10 km" aria-label="Activity description"></textarea>
                </div>
                <div class="button-group">
                    <button type="submit" aria-label="Log activity">Log Activity</button>
                    <button type="reset" class="button-secondary" aria-label="Clear form">Clear</button>
                </div>
            </form>
        </div>

        <div class="goal-section">
            <h3>Weekly CO‚ÇÇ Goal</h3>
            <div class="goal-input-group">
                <input type="number" id="goalInput" step="0.1" min="0" placeholder="Enter weekly goal (kg CO‚ÇÇ)" aria-label="Weekly CO2 goal">
                <button type="button" id="setGoalBtn" aria-label="Set weekly goal">Set Goal</button>
            </div>
            <div id="goalDisplay"></div>
        </div>

        <div class="export-section">
            <h3>Export Summary</h3>
            <button type="button" id="exportBtn" class="export-button" aria-label="Export weekly summary as text">üìã Copy Weekly Summary to Clipboard</button>
        </div>

        <div class="activities-section">
            <h2>Activities</h2>
            <div class="activity-list" id="activityList" role="list">
                <div class="empty-state">
                    <div class="empty-state-icon">üìù</div>
                    <p>No activities logged yet. Start tracking your carbon footprint!</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const STORAGE_KEY = 'carbonFootprintActivities';
        const GOAL_KEY = 'carbonFootprintGoal';
        const THEME_KEY = 'carbonFootprintTheme';
        let activities = [];
        let draggedItem = null;

        const categoryIcons = {
            'Car': 'üöó',
            'Bus': 'üöå',
            'Flight': '‚úàÔ∏è',
            'Electricity': '‚ö°',
            'Food': 'üçΩÔ∏è',
            'Shopping': 'üõçÔ∏è',
            'Other': 'üìå'
        };

        // Initialize
        function init() {
            loadActivities();
            loadTheme();
            renderActivities();
            updateSummary();
            loadGoal();
            setupEventListeners();
        }

        function setupEventListeners() {
            document.getElementById('activityForm').addEventListener('submit', handleAddActivity);
            document.getElementById('setGoalBtn').addEventListener('click', handleSetGoal);
            document.getElementById('exportBtn').addEventListener('click', handleExport);
            document.querySelector('.theme-toggle').addEventListener('click', toggleTheme);
        }

        function loadActivities() {
            const stored = localStorage.getItem(STORAGE_KEY);
            activities = stored ? JSON.parse(stored) : [];
        }

        function saveActivities() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(activities));
        }

        function handleAddActivity(e) {
            e.preventDefault();
            const category = document.getElementById('category').value;
            const co2 = parseFloat(document.getElementById('co2').value);
            const description = document.getElementById('description').value;

            if (!category || isNaN(co2) || co2 < 0) {
                showToast('Please fill in all fields correctly');
                return;
            }

            const activity = {
                id: Date.now(),
                timestamp: new Date().toISOString(),
                category,
                description,
                co2
            };

            activities.unshift(activity);
            saveActivities();
            renderActivities();
            updateSummary();
            e.target.reset();
            showToast('Activity logged successfully!');
        }

        function handleDeleteActivity(id) {
            activities = activities.filter(a => a.id !== id);
            saveActivities();
            renderActivities();
            updateSummary();
            showToast('Activity deleted');
        }

        function renderActivities() {
            const list = document.getElementById('activityList');
            if (activities.length === 0) {
                list.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üìù</div>
                        <p>No activities logged yet. Start tracking your carbon footprint!</p>
                    </div>
                `;
                return;
            }

            list.innerHTML = activities.map(activity => {
                const date = new Date(activity.timestamp);
                const dateStr = date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                const icon = categoryIcons[activity.category] || 'üìå';

                return `
                    <div class="activity-item" draggable="true" data-id="${activity.id}" role="listitem">
                        <div class="activity-icon">${icon}</div>
                        <div class="activity-content">
                            <div class="activity-date">${dateStr}</div>
                            <div class="activity-description">${activity.category}${activity.description ? ': ' + activity.description : ''}</div>
                        </div>
                        <div class="activity-co2">${activity.co2.toFixed(2)} kg</div>
                        <button type="button" class="activity-delete" data-id="${activity.id}" aria-label="Delete activity">Delete</button>
                    </div>
                `;
            }).join('');

            // Add event listeners for delete buttons
            document.querySelectorAll('.activity-delete').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    handleDeleteActivity(parseInt(btn.dataset.id));
                });
            });

            // Add drag listeners
            setupDragListeners();
        }

        function setupDragListeners() {
            const items = document.querySelectorAll('.activity-item');
            items.forEach(item => {
                item.addEventListener('dragstart', handleDragStart);
                item.addEventListener('dragend', handleDragEnd);
                item.addEventListener('dragover', handleDragOver);
                item.addEventListener('drop', handleDrop);
            });
        }

        function handleDragStart(e) {
            draggedItem = this;
            this.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
        }

        function handleDragEnd(e) {
            this.classList.remove('dragging');
            draggedItem = null;
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
        }

        function handleDrop(e) {
            e.preventDefault();
            if (draggedItem && draggedItem !== this) {
                const draggedId = parseInt(draggedItem.dataset.id);
                const targetId = parseInt(this.dataset.id);
                const draggedIdx = activities.findIndex(a => a.id === draggedId);
                const targetIdx = activities.findIndex(a => a.id === targetId);

                if (draggedIdx !== -1 && targetIdx !== -1) {
                    [activities[draggedIdx], activities[targetIdx]] = [activities[targetIdx], activities[draggedIdx]];
                    saveActivities();
                    renderActivities();
                }
            }
        }

        function updateSummary() {
            const now = new Date();
            const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
            const monthAgo = new Date(now.getFullYear(), now.getMonth(), 1);

            const weeklyActivities = activities.filter(a => new Date(a.timestamp) >= weekAgo);
            const monthlyActivities = activities.filter(a => new Date(a.timestamp) >= monthAgo);

            const weeklyTotal = weeklyActivities.reduce((sum, a) => sum + a.co2, 0);
            const monthlyTotal = monthlyActivities.reduce((sum, a) => sum + a.co2, 0);
            const lifetimeTotal = activities.reduce((sum, a) => sum + a.co2, 0);

            document.getElementById('weeklyTotal').textContent = weeklyTotal.toFixed(1);
            document.getElementById('monthlyTotal').textContent = monthlyTotal.toFixed(1);
            document.getElementById('lifetimeTotal').textContent = lifetimeTotal.toFixed(1);

            // Calculate trend
            const twoWeeksAgo = new Date(now.getTime() - 14 * 24 * 60 * 60 * 1000);
            const lastWeekActivities = activities.filter(a => {
                const date = new Date(a.timestamp);
                return date >= twoWeeksAgo && date < weekAgo;
            });
            const lastWeekTotal = lastWeekActivities.reduce((sum, a) => sum + a.co2, 0);

            const trendEl = document.getElementById('weeklyTrend');
            if (lastWeekTotal === 0) {
                trendEl.textContent = '';
            } else if (weeklyTotal > lastWeekTotal) {
                trendEl.innerHTML = `<span class="trend-up">‚Üë ${((weeklyTotal - lastWeekTotal) / lastWeekTotal * 100).toFixed(0)}% vs last week</span>`;
            } else {
                trendEl.innerHTML = `<span class="trend-down">‚Üì ${((lastWeekTotal - weeklyTotal) / lastWeekTotal * 100).toFixed(0)}% vs last week</span>`;
            }

            updateGoalProgress(weeklyTotal);
        }

        function handleSetGoal() {
            const goalValue = parseFloat(document.getElementById('goalInput').value);
            if (isNaN(goalValue) || goalValue < 0) {
                showToast('Please enter a valid goal');
                return;
            }
            localStorage.setItem(GOAL_KEY, goalValue);
            loadGoal();
            showToast('Goal set successfully!');
        }

        function loadGoal() {
            const goal = localStorage.getItem(GOAL_KEY);
            if (goal) {
                document.getElementById('goalInput').value = goal;
                updateGoalProgress(parseFloat(document.getElementById('weeklyTotal').textContent));
            }
        }

        function updateGoalProgress(current) {
            const goal = localStorage.getItem(GOAL_KEY);
            const goalDisplay = document.getElementById('goalDisplay');

            if (!goal) {
                goalDisplay.innerHTML = '';
                return;
            }

            const goalNum = parseFloat(goal);
            const percentage = Math.min((current / goalNum) * 100, 100);
            const remaining = Math.max(goalNum - current, 0);

            goalDisplay.innerHTML = `
                <div class="progress-bar">
                    <div class="progress-fill" style="width: ${percentage}%"></div>
                </div>
                <div class="progress-text">${current.toFixed(1)} / ${goalNum.toFixed(1)} kg CO‚ÇÇ (${remaining.toFixed(1)} kg remaining)</div>
            `;
        }

        function handleExport() {
            const now = new Date();
            const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
            const weeklyActivities = activities.filter(a => new Date(a.timestamp) >= weekAgo);
            const weeklyTotal = weeklyActivities.reduce((sum, a) => sum + a.co2, 0);

            let text = `Carbon Footprint Weekly Summary\n`;
            text += `Week of ${weekAgo.toLocaleDateString()} to ${now.toLocaleDateString()}\n`;
            text += `\nTotal CO‚ÇÇ: ${weeklyTotal.toFixed(2)} kg\n`;
            text += `\nActivities:\n`;

            weeklyActivities.forEach(activity => {
                const date = new Date(activity.timestamp).toLocaleDateString();
                text += `- ${date} | ${activity.category}: ${activity.co2.toFixed(2)} kg CO‚ÇÇ`;
                if (activity.description) text += ` (${activity.description})`;
                text += `\n`;
            });

            navigator.clipboard.writeText(text).then(() => {
                showToast('Summary copied to clipboard!');
            }).catch(() => {
                showToast('Failed to copy');
            });
        }

        function toggleTheme() {
            const html = document.documentElement;
            const isDark = html.style.colorScheme === 'dark';
            html.style.colorScheme = isDark ? 'light' : 'dark';
            localStorage.setItem(THEME_KEY, isDark ? 'light' : 'dark');
            updateThemeToggleButton();
        }

        function loadTheme() {
            const saved = localStorage.getItem(THEME_KEY);
            if (saved) {
                document.documentElement.style.colorScheme = saved;
            } else {
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                document.documentElement.style.colorScheme = prefersDark ? 'dark' : 'light';
            }
            updateThemeToggleButton();
        }

        function updateThemeToggleButton() {
            const isDark = document.documentElement.style.colorScheme === 'dark' || 
                          (window.matchMedia('(prefers-color-scheme: dark)').matches && !localStorage.getItem(THEME_KEY));
            document.querySelector('.theme-toggle').textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Delete') {
                const focused = document.activeElement;
                if (focused.classList.contains('activity-delete')) {
                    focused.click();
                }
            }
        });

        init();
    </script>
</body>
</html>